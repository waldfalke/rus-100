# Product Design Контракт: Генератор тестов ЕГЭ

## Метаданные
- **Версия**: 1.0.0
- **Статус**: В разработке
- **Последнее обновление**: 2023-05-23
- **Последний редактор**: AI
- **Ветка разработки**: main

## История изменений
| Дата | Версия | Автор | Описание изменений | PR |
|------|--------|-------|-------------------|-----|
| 2023-05-23 | 1.0.0 | AI | Начальная версия | - |

## Назначение и область применения
Генератор тестов ЕГЭ предназначен для учителей русского языка, позволяя формировать индивидуальные наборы заданий для подготовки учеников к Единому государственному экзамену по русскому языку. Компонент обеспечивает гибкий и удобный интерфейс для выбора различных типов заданий, установки их количества и уровня сложности в соответствии с текущими требованиями ЕГЭ.

### Preconditions
- Пользователь аутентифицирован в системе и имеет роль "Учитель".
- Доступен банк заданий по русскому языку, соответствующий структуре, ожидаемой вкладками ("По заданиям", "ЕГЭ", "Упражнения").
- Существует возможность выбрать или создать группу учеников для назначения теста.
- Браузер пользователя поддерживает современные веб-стандарты (HTML5, CSS3, JavaScript ES6+).

### Postconditions
- **После успешного нажатия "Создать тест":**
    - Новый тест сохраняется в системе с указанным названием и выбранной конфигурацией заданий (тип, количество, сложность).
    - Тест ассоциируется с выбранной группой учеников.
    - Пользователь получает уведомление об успешном создании теста.
    - Созданный тест становится доступным для назначения и прохождения учениками выбранной группы.

### Invariants
- **Лимит заданий**: Общее количество заданий, выбранных для теста (отображаемое в прогресс-индикаторе и используемое при создании), никогда не превышает 50.
- **Корректность выбора**: Количество заданий для каждого конкретного типа (`TaskCard.count`) всегда находится в диапазоне от 0 до максимума для этого типа (`TaskCard.maxCount`).
- **Связь с группой**: Каждый создаваемый тест всегда связан с конкретной группой учеников.
- **Наличие названия**: Каждый создаваемый тест всегда имеет название, введенное пользователем.
- **Консистентность UI**: Независимо от активной вкладки ("По заданиям", "ЕГЭ", "Упражнения"), основные элементы управления (название теста, выбор группы, прогресс-бар, кнопка "Создать тест") присутствуют и функционируют одинаково.
- **Доступность банка заданий**: Задания, отображаемые на вкладках, всегда берутся из актуального банка заданий.

### Exceptions
- **Ошибка доступа**: Попытка доступа к генератору неавторизованным пользователем или пользователем без прав "Учитель".
- **Ошибка данных**: Недоступен банк заданий, или его структура не соответствует ожиданиям.
- **Ошибка выбора группы**: Невозможно выбрать или создать группу учеников.
- **Превышение лимита**: Ошибка в логике, позволяющая выбрать более 50 заданий (хотя инвариант должен это предотвращать).
- **Ошибка сохранения теста**: Не удалось сохранить тест в БД из-за ошибки сервера, БД или сетевых проблем.
- **Невалидное название/группа**: Попытка создать тест без названия или без выбранной группы.
- **Ошибка UI**: Сбой в работе компонентов интерфейса (вкладки, карточки, прогресс-бар).

## Требования к компоненту
- Возможность выбора заданий из трех различных категорий: по номерам заданий, по формату ЕГЭ, по упражнениям
- Настройка количества заданий каждого типа с лимитом в 50 заданий на тест
- Выбор уровня сложности (легкий/сложный/оба) для поддерживаемых типов заданий
- Возможность создания и выбора группы учеников для назначения теста
- Присвоение имени создаваемому тесту
- Визуальный индикатор общего количества выбранных заданий
- Группировка заданий по категориям с возможностью сворачивания/разворачивания

## Основные сценарии использования

### Сценарий 1: Создание теста по номерам заданий ЕГЭ
1. Учитель переходит на страницу создания теста
2. Вводит название теста в поле "Название теста"
3. Выбирает существующую группу учеников или создает новую
4. На вкладке "По заданиям" выбирает нужные категории заданий
5. Для каждого задания устанавливает необходимое количество вопросов с помощью кнопок "+" и "-"
6. При необходимости настраивает уровень сложности заданий
7. Отслеживает общее количество заданий через прогресс-бар
8. Нажимает кнопку "Создать тест" для завершения создания

### Сценарий 2: Создание теста по формату ЕГЭ
1. Учитель переходит на страницу создания теста
2. Вводит название теста в поле "Название теста"
3. Выбирает существующую группу учеников или создает новую
4. Переключается на вкладку "ЕГЭ"
5. Видит задания, сгруппированные по частям экзамена (Часть 1, Часть 2)
6. Для каждого раздела устанавливает необходимое количество вопросов
7. Отслеживает общее количество заданий через прогресс-бар
8. Нажимает кнопку "Создать тест" для завершения создания

### Сценарий 3: Создание теста по упражнениям
1. Учитель переходит на страницу создания теста
2. Вводит название теста в поле "Название теста"
3. Выбирает существующую группу учеников или создает новую
4. Переключается на вкладку "Упражнения"
5. Выбирает нужные категории упражнений (Орфография, Пунктуация и т.д.)
6. Для каждого упражнения устанавливает необходимое количество вопросов
7. Отслеживает общее количество заданий через прогресс-бар
8. Нажимает кнопку "Создать тест" для завершения создания

## Связанные контракты
- [UX контракт: Интерфейс выбора заданий](./TestGenerator-UX-TaskSelection-Contract.md)
- [UX контракт: Панель вкладок](./TestGenerator-UX-Tabs-Contract.md)
- [UX контракт: Прогресс-индикатор](./TestGenerator-UX-Progress-Contract.md)
- [Компонент: TaskCard](./TestGenerator-Component-TaskCard-Contract.md) 