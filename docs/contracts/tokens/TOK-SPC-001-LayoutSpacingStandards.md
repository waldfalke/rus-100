## Контракт TOK-SPC-001: Стандарты токенов для отступов и сеток

**Дата:** 2024-07-27

**Статус:** Предложен

**Связанные контракты:** LYT-CNTR-001

**Цель:**
Определить и задокументировать стандартное использование токенов из категории `theme.space` для управления вертикальными и горизонтальными отступами между элементами макета (layout spacing), внутренними отступами компонентов (component padding) и отступами в сетках (grid gaps). Это обеспечит визуальную согласованность и упростит поддержку и разработку.

**Текущее состояние:**
В файлах темы (`design-system/tokens/themes/*.json`) уже определена структура `theme.space` с подкатегориями `layout`, `component` и `grid`, ссылающимися на базовые токены `spacing.*`. Однако отсутствует четкое соглашение о том, какой токен использовать в какой ситуации.

```json
// Пример из design-system/tokens/themes/light.json
"space": {
  "component": {
    "xs": { "value": "{spacing.1}", "type": "spacing" }, // 0.25rem
    "sm": { "value": "{spacing.2}", "type": "spacing" }, // 0.5rem
    "md": { "value": "{spacing.4}", "type": "spacing" }, // 1rem
    "lg": { "value": "{spacing.6}", "type": "spacing" }, // 1.5rem
    "xl": { "value": "{spacing.8}", "type": "spacing" }  // 2rem
  },
  "layout": {
    "xs": { "value": "{spacing.2}", "type": "spacing" }, // 0.5rem
    "sm": { "value": "{spacing.4}", "type": "spacing" }, // 1rem
    "md": { "value": "{spacing.6}", "type": "spacing" }, // 1.5rem
    "lg": { "value": "{spacing.8}", "type": "spacing" }, // 2rem
    "xl": { "value": "{spacing.16}", "type": "spacing" }, // 4rem
    "2xl": { "value": "{spacing.24}", "type": "spacing" } // 6rem
  },
  "grid": {
    "base": { "value": "{spacing.4}", "type": "spacing" } // 1rem
    // Возможно, потребуются доп. размеры
  }
}
```

**Предлагаемые стандарты использования токенов `theme.space`:**

1.  **`theme.space.layout` (Отступы между блоками - `margin`, `space-y-*`)**
    *   **Назначение:** Управляет вертикальными и горизонтальными отступами *между* независимыми секциями страницы или крупными блоками интерфейса (например, между шапкой `TopNavBlock` и основным контентом `<main>`).
    *   **Стандартное использование:**
        *   `layout.md` (`{spacing.6}` / `1.5rem` / `mb-6` или `mt-6`): **Основной** вертикальный отступ между крупными секциями (например, между `TopNavBlock` и `<main>`, или между формой настроек и блоком вкладок в `app/page.tsx`).
        *   `layout.lg` (`{spacing.8}` / `2rem` / `mb-8`): Увеличенный отступ для визуального разделения очень разных секций.
        *   `layout.sm` (`{spacing.4}` / `1rem` / `mb-4` или `space-y-4`): Отступ между связанными элементами в вертикальном потоке (например, между полями формы, элементами списка в `TaskCardBlock`).
        *   `layout.xl` / `layout.2xl`: Для очень больших отступов (использовать по необходимости).
        *   `layout.xs`: Для минимальных отступов между блоками.

2.  **`theme.space.component` (Внутренние отступы - `padding`)**
    *   **Назначение:** Управляет внутренними отступами *внутри* компонентов-контейнеров (карточки, модальные окна, панели и т.д.).
    *   **Стандартное использование:**
        *   `component.lg` (`{spacing.6}` / `1.5rem` / `p-6`): **Основной** padding для крупных контейнеров (`<div class="bg-card ...">` в `app/page.tsx`).
        *   `component.md` (`{spacing.4}` / `1rem` / `p-4`): Padding для компонентов среднего размера или внутренних элементов крупных контейнеров.
        *   `component.sm` / `component.xs`: Для небольших элементов (кнопки, инпуты - часто управляются собственными стилями/токенами, но могут использоваться для оберток).
        *   `component.xl`: Для контейнеров с очень большими внутренними отступами.

3.  **`theme.space.grid` (Отступы в сетках - `gap`)**
    *   **Назначение:** Управляет расстоянием между элементами в CSS Grid или Flexbox контейнерах.
    *   **Стандартное использование:**
        *   `grid.md` (`{spacing.6}` / `1.5rem` / `gap-6`): **Основной** gap для главных сеток макета (например, 3-колоночная форма в `app/page.tsx`). *(Примечание: Этот токен, возможно, потребуется добавить в `themes/*.json`)*.
        *   `grid.base` (`{spacing.4}` / `1rem` / `gap-4`): Gap для второстепенных или более плотных сеток.
        *   *По необходимости могут быть добавлены другие размеры (`sm`, `lg` и т.д.).*

**Реализация в коде:**

Использовать CSS-переменные, генерируемые из этих токенов, в классах Tailwind с синтаксисом произвольных значений:

*   `margin`: `mb-[var(--theme-space-layout-md)]` или `mt-[var(--theme-space-layout-md)]`
*   `padding`: `p-[var(--theme-space-component-lg)]`
*   `gap`: `gap-[var(--theme-space-grid-md)]`
*   `space-y`: `space-y-[var(--theme-space-layout-sm)]`

**Необходимые доработки токенов:**

*   Проверить наличие `theme.space.grid.md` в `themes/light.json` и `themes/dark.json`. Если отсутствует, добавить его со значением `{spacing.6}`.

```json
// Добавить в light.json и dark.json, если отсутствует
"grid": {
  "base": { "value": "{spacing.4}", "type": "spacing" },
  "md": { "value": "{spacing.6}", "type": "spacing" } // Добавленный токен
}
```

**Следующие шаги:**

1.  Утвердить данный контракт.
2.  Добавить токен `theme.space.grid.md` (если необходимо) в `themes/light.json` и `themes/dark.json`.
3.  Пересобрать токены (`npm run build:tokens`).
4.  Провести рефакторинг `app/page.tsx`, заменив классы `mb-*`, `p-*`, `gap-*`, `space-y-*` на соответствующие классы с CSS-переменными согласно этому контракту.
5.  Постепенно применять этот стандарт к другим страницам и компонентам.

**Преимущества:**
*   Повышение консистентности верстки.
*   Централизованное управление стандартами отступов.
*   Упрощение редизайна и поддержки тем. 