# Реестр текущих стилевых параметров

## CSS-переменные

### Основные переменные (app/globals.css)

| Переменная | Значение | Использование | Категория | Соответствие в новой системе |
|------------|----------|---------------|-----------|------------------------------|
| --background | 0 0% 100% | Фон страницы | Цвет | color.background.default |
| --foreground | 222.2 84% 4.9% | Текст страницы | Цвет | color.text.primary |
| --card | 0 0% 100% | Фон карточек | Цвет | color.surface.card |
| --card-foreground | 222.2 84% 4.9% | Текст карточек | Цвет | color.text.onCard |
| --popover | 0 0% 100% | Фон всплывающих элементов | Цвет | color.surface.popover |
| --popover-foreground | 222.2 84% 4.9% | Текст всплывающих элементов | Цвет | color.text.onPopover |
| --primary | 173 100% 28% | Основной цвет брендинга | Цвет | color.primary.500 |
| --primary-foreground | 210 40% 98% | Текст на фоне основного цвета | Цвет | color.text.onPrimary |
| --secondary | 210 40% 96.1% | Второстепенный цвет | Цвет | color.secondary.500 |
| --secondary-foreground | 222.2 47.4% 11.2% | Текст на фоне второстепенного цвета | Цвет | color.text.onSecondary |
| --muted | 210 40% 96.1% | Приглушенный фон | Цвет | color.surface.muted |
| --muted-foreground | 215.4 16.3% 46.9% | Приглушенный текст | Цвет | color.text.muted |
| --accent | 210 40% 96.1% | Акцентный цвет | Цвет | color.accent.500 |
| --accent-foreground | 222.2 47.4% 11.2% | Текст на акцентном фоне | Цвет | color.text.onAccent |
| --destructive | 0 84.2% 60.2% | Цвет ошибки/удаления | Цвет | color.error.500 |
| --destructive-foreground | 210 40% 98% | Текст на фоне ошибки | Цвет | color.text.onError |
| --border | 214.3 31.8% 91.4% | Цвет границ | Цвет | color.border.default |
| --input | 214.3 31.8% 91.4% | Границы полей ввода | Цвет | color.border.input |
| --ring | 173 100% 28% | Цвет кольца фокуса | Цвет | color.border.focus |
| --radius | 0.5rem | Радиус скругления | Размер | radius.base |

### Дополнительные переменные (styles/globals.css)

| Переменная | Значение | Использование | Категория | Соответствие в новой системе |
|------------|----------|---------------|-----------|------------------------------|
| --chart-1 | 12 76% 61% | Первый цвет графиков | Цвет | color.chart.1 |
| --chart-2 | 173 58% 39% | Второй цвет графиков | Цвет | color.chart.2 |
| --chart-3 | 197 37% 24% | Третий цвет графиков | Цвет | color.chart.3 |
| --chart-4 | 43 74% 66% | Четвертый цвет графиков | Цвет | color.chart.4 |
| --chart-5 | 27 87% 67% | Пятый цвет графиков | Цвет | color.chart.5 |
| --sidebar-background | 0 0% 98% | Фон боковой панели | Цвет | color.surface.sidebar |
| --sidebar-foreground | 240 5.3% 26.1% | Текст боковой панели | Цвет | color.text.onSidebar |
| --sidebar-primary | 240 5.9% 10% | Основной цвет боковой панели | Цвет | color.primary.sidebar |
| --sidebar-primary-foreground | 0 0% 98% | Текст на основном цвете боковой панели | Цвет | color.text.onSidebarPrimary |
| --sidebar-accent | 240 4.8% 95.9% | Акцентный цвет боковой панели | Цвет | color.accent.sidebar |
| --sidebar-accent-foreground | 240 5.9% 10% | Текст на акцентном фоне боковой панели | Цвет | color.text.onSidebarAccent |
| --sidebar-border | 220 13% 91% | Границы боковой панели | Цвет | color.border.sidebar |
| --sidebar-ring | 217.2 91.2% 59.8% | Кольцо фокуса в боковой панели | Цвет | color.border.sidebarFocus |

## Система отступов

### Анализ отступов в tailwind.config.ts

Проект использует дефолтную систему отступов Tailwind CSS без явных переопределений в конфигурации, что приводит к использованию следующих отступов:

| Класс | Значение | Использование | Соответствие в новой системе |
|-------|----------|---------------|------------------------------|
| p-0, m-0 | 0 | Отсутствие отступов | spacing.0 |
| p-1, m-1 | 0.25rem (4px) | Минимальные отступы | spacing.1 |
| p-2, m-2 | 0.5rem (8px) | Малые отступы | spacing.2 |
| p-3, m-3 | 0.75rem (12px) | Средне-малые отступы | spacing.3 |
| p-4, m-4 | 1rem (16px) | Стандартные отступы | spacing.4 |
| p-5, m-5 | 1.25rem (20px) | Средние отступы | spacing.5 |
| p-6, m-6 | 1.5rem (24px) | Большие отступы | spacing.6 |
| p-8, m-8 | 2rem (32px) | Очень большие отступы | spacing.8 |
| p-10, m-10 | 2.5rem (40px) | Максимальные отступы | spacing.10 |
| p-12, m-12 | 3rem (48px) | Экстра-большие отступы | spacing.12 |

### Анализ использования отступов

| Значение | Контекст использования | Частота | Проблемы |
|----------|------------------------|---------|---------|
| p-4 | Базовый отступ компонентов | Высокая | Непоследовательность при адаптации |
| mb-6 | Отступ между компонентами | Высокая | Отсутствие системы вертикального ритма |
| space-y-6 | Отступы между дочерними элементами | Средняя | Конфликты с другими маргинами |
| md:p-6 | Респонсивное увеличение отступов | Средняя | Непоследовательность брейкпоинтов |
| mx-auto | Центрирование по горизонтали | Высокая | - |

## Система сеток

### Конфигурация и контейнеры

В tailwind.config.ts определены следующие параметры:

```js
container: {
  center: true,
  padding: "2rem",
  screens: {
    "2xl": "1400px",
  },
}
```

### Брейкпоинты для респонсив-дизайна

| Брейкпоинт | Значение | Использование |
|------------|----------|---------------|
| xs (по умолчанию) | < 640px | Мобильные устройства |
| sm | >= 640px | Малые планшеты |
| md | >= 768px | Планшеты |
| lg | >= 1024px | Ноутбуки |
| xl | >= 1280px | Десктопы |
| 2xl | >= 1536px | Большие десктопы |

### Используемые паттерны сеток

| Паттерн | Код | Использование | Проблемы |
|---------|-----|---------------|----------|
| Контейнер с автоотступами | `container mx-auto` | Центральный блок страницы | Отсутствие единообразия в максимальной ширине |
| Колонки с отступами | `flex flex-col md:flex-row gap-4` | Адаптивная раскладка | Непоследовательное использование |
| Модульная сетка | Отсутствует | - | Отсутствие стандартизированной модульной сетки |
| Боковая панель | `flex-none w-64` | Фиксированная ширина боковой панели | Жесткозакодированные значения ширины |

## Tailwind-классы

### Наиболее используемые классы (на основе анализа account/page.tsx)

| Класс | Предполагаемая частота | Компоненты | Категория | Соответствие в новой системе |
|-------|------------------------|-----------|-----------|------------------------------|
| flex | Высокая | Контейнеры | Лейаут | layout.flex |
| items-center | Высокая | Контейнеры | Лейаут | layout.alignItems.center |
| justify-between | Высокая | Контейнеры | Лейаут | layout.justifyContent.between |
| p-4 | Высокая | Карточки, секции | Отступ | spacing.padding.4 |
| md:p-6 | Средняя | Адаптивные блоки | Отступ | spacing.padding.6 |
| mb-6 | Средняя | Вертикальные отступы | Отступ | spacing.margin.bottom.6 |
| text-2xl | Средняя | Заголовки | Текст | typography.size.2xl |
| font-bold | Средняя | Заголовки | Текст | typography.weight.bold |
| space-y-6 | Средняя | Контейнеры | Лейаут | layout.spaceY.6 |
| container | Средняя | Страницы | Лейаут | layout.container |
| mx-auto | Высокая | Центрирование | Лейаут | layout.margin.x.auto |
| flex-grow | Средняя | Контейнеры | Лейаут | layout.flexGrow |
| min-h-screen | Низкая | Страницы | Лейаут | layout.minHeight.screen |
| bg-background | Средняя | Фоны | Цвет | color.background.default |
| text-foreground | Средняя | Текст | Цвет | color.text.primary |

## Повторяющиеся значения

| Значение | Тип | Предполагаемая частота | Предлагаемый токен |
|----------|-----|------------------------|-------------------|
| #0ea5e9 (--primary в HSL) | Цвет | Высокая | color.primary.500 |
| 0.5rem (--radius) | Размер | Высокая | radius.base |
| 1rem (p-4) | Отступ | Высокая | spacing.4 |
| 1.5rem (p-6) | Отступ | Средняя | spacing.6 |
| 1.5rem (text-2xl) | Размер текста | Средняя | fontSize.2xl |

## Темизация

Проект поддерживает две темы: светлую (по умолчанию) и темную. Для обеих тем определены свои наборы CSS-переменных с различными значениями цветов.

## Выявленные проблемы

### Конфликты переменных и стилей

1. **Дублирование CSS-переменных**: Одинаковые переменные определены как в `app/globals.css`, так и в `styles/globals.css`, но с разными значениями.
2. **Несогласованность структуры**: Переменные для боковой панели определены только в `styles/globals.css`.
3. **Потенциальные конфликты при переключении темы**: Из-за различий в определении основных цветов в разных CSS-файлах.

### Проблемы с отступами и сеткой

1. **Отсутствие системного вертикального ритма**: Непоследовательное использование отступов между компонентами.
2. **Отсутствие четкой модульной сетки**: Не определена стандартная сетка для всего проекта.
3. **Жесткое кодирование значений ширины**: Вместо использования относительных единиц или токенов.
4. **Непоследовательное использование брейкпоинтов**: Различные подходы к адаптивной верстке в разных компонентах.
5. **Конфликты между utility-классами**: Например, одновременное использование `space-y-6` и `mb-6`.
6. **Отсутствие стандартизации контейнеров**: Разные максимальные ширины и отступы для похожих блоков.

## Рекомендации по миграции

1. **Унификация CSS-переменных**: Объединить определения из обоих файлов в единую систему токенов.
2. **Структуризация по категориям**: Организовать токены по категориям (цвета, типографика, размеры, тени).
3. **Использование семантических имен**: Заменить технические имена на семантические для улучшения понимания.
4. **Консистентная темизация**: Обеспечить единообразие темизации для всех компонентов.
5. **Создание системы вертикального ритма**: Определить стандартные отступы и последовательно использовать их во всем проекте.
6. **Определение модульной сетки**: Создать стандартную модульную сетку на основе токенов.
7. **Стандартизация брейкпоинтов**: Создать систему брейкпоинтов, привязанную к токенам.
8. **Создание компонентов-контейнеров**: Стандартизировать контейнеры с предсказуемыми отступами и максимальной шириной.
9. **Документирование**: Создать документацию с примерами использования всех токенов и сеток.

## Анализ стилей компонентов из `components/ui`

При первоначальном анализе возникло предположение, что компоненты (`button.tsx`, `card.tsx`, `checkbox.tsx`, `radio.tsx`, `modal.tsx`, `menu.tsx`) могут использовать свои токены или отличающиеся подходы к стилизации. Проверка показала следующее:

*   **Расположение**: Большинство базовых UI-компонентов (`button`, `card`, `checkbox`, `radio-group`, `dialog`, `dropdown-menu` и др.) находятся в директории `components/ui/`.
*   **Основной метод стилизации**: Эти компоненты преимущественно используют **Tailwind CSS utility classes** для определения своего внешнего вида. Часто они являются обертками над примитивами из `@radix-ui`.
*   **Зависимость от темы**: Стилизация через Tailwind означает, что внешний вид компонентов (цвета, отступы, скругления) *косвенно* зависит от CSS-переменных темы (`--primary`, `--card`, `--radius` и т.д.), определенных в `app/globals.css` и/или `tailwind.config.ts`. Предыдущий поиск (`grep`) мог их не обнаружить, так как прямого использования `var(--token)` в большинстве этих компонентов нет.
*   **Особый случай (`Dialog.tsx`)**: Компонент `dialog.tsx` (и его подкомпоненты) использует **собственные, компонентно-специфичные CSS-переменные** (например, `--component-dialog-content-background-color`, `--component-dialog-title-font-size`) *вместе* с Tailwind-классами. Это указывает на смешанный подход к стилизации, где часть параметров управляется глобальной темой через Tailwind, а часть — локальными переменными компонента.

### Выводы для миграции и стабильности

*   **Совместимость с Tailwind**: Ключевым моментом для стабильной миграции является обеспечение того, чтобы новая система токенов (Style Dictionary) генерировала CSS-переменные, **полностью совместимые** с тем, что ожидает конфигурация Tailwind (`tailwind.config.ts`). Имена переменных должны совпадать (например, `--primary`, `--secondary`, `--radius`).
*   **Обработка компонентных переменных**: Необходимо принять решение по переменным, специфичным для компонентов (как в `Dialog`):
    *   **Интеграция**: Попытаться интегрировать их значения в глобальную систему токенов (например, создать семантические токены `dialog.backgroundColor`, `dialog.title.fontSize`).
    *   **Сохранение**: Оставить их как есть, управляемыми внутри компонента, если они не пересекаются с глобальной темой.
*   **Тестирование**: Учитывая косвенную связь через Tailwind и наличие специфичных переменных, **тщательное визуальное регрессионное тестирование** этих компонентов после миграции будет абсолютно необходимо для предотвращения поломок. Прототипирование на `app/account/page.tsx` даст начальную уверенность, но потребуется более широкое тестирование.
*   **Документация**: Процесс миграции стилей для этих компонентов должен быть задокументирован, особенно обработка специфичных переменных `Dialog`.

### Совместимость с Tailwind CSS

Ключевой проблемой является несоответствие имен CSS-переменных, генерируемых Style Dictionary по умолчанию (например, `--theme-color-primary-default`), и имен, ожидаемых конфигурацией `tailwind.config.ts` (например, `--primary`). Для решения этой проблемы требуется создание кастомного форматтера Style Dictionary. Требования к форматтеру и таблица сопоставления токенов и переменных Tailwind описаны в контракте **[TD-FMT-001: Кастомный форматтер Style Dictionary для Tailwind CSS](./TD-FMT-001-TailwindFormatter.md)**.

## Отслеживание статуса токенизации компонентов

Для явного отслеживания состояния интеграции токенов в компоненты используется специальный комментарий-маркер в начале каждого `.tsx` файла компонента.

**Формат маркера:**

```typescript
// @token-status: [СТАТУС] ([ДЕТАЛИ])
```

*   `@token-status:`: Уникальный префикс для поиска.
*   `[СТАТУС]`:
    *   `COMPLETED`: Компонент полностью использует систему токенов (явно через `var()` или неявно через Tailwind).
    *   `PENDING`: Компонент требует рефакторинга для использования токенов (например, использует старые переменные).
    *   `NEEDS_REVIEW`: Статус компонента не определен, требуется проверка (обычно для кастомных компонентов).
    *   `NA`: Не применимо (для логических файлов, хуков и т.д.).
*   `([ДЕТАЛИ])`: Необязательное пояснение:
    *   `(Implicit via Tailwind)`: Для компонентов, зависящих от конфигурации Tailwind (`shadcn/ui` стиль).
    *   `(Uses legacy vars)`: Для компонентов до рефакторинга.
    *   `(Contains custom styles)`: Для компонентов со смешанными или нестандартными стилями.
    *   `(Explicit via var())`: Для компонентов, использующих `.module.css` с токенами.

**Примеры:**

```typescript
// @token-status: COMPLETED (Implicit via Tailwind)
import * as React from "react"
// ... button.tsx ...

// @token-status: PENDING (Uses legacy vars)
import * as React from "react"
// ... dialog.tsx ...

// @token-status: NEEDS_REVIEW
import React from 'react';
// ... TaskCardBlock.tsx ...
```

Это позволяет быстро оценить статус компонента и найти компоненты, требующие работы, с помощью поиска по проекту (например, `grep "@token-status: PENDING"`).

**Примечание:** Данные маркеры не добавляются в файлы историй Storybook (`*.stories.tsx`), так как статус токенизации относится к самому компоненту, а не к его демонстрации. 