# Gherkin/Cucumber Testing Documentation

## Обзор
Человекочитаемые сценарии тестирования на русском языке для симуляции пользовательского пути в генераторе тестов.

## Структура файлов

```
tests/e2e/
├── features/
│   ├── user-journey.feature       # Сценарии пользовательского пути
│   └── test-creation.feature      # Сценарии создания тестов
├── support/
│   └── setup.ts                   # Настройка Cucumber + Playwright
├── step-definitions.ts            # Шаговые определения (навигация и темы)
└── creation-steps.ts              # Шаговые определения (создание тестов)
```

## Feature файлы (Gherkin)

### user-journey.feature
```gherkin
Функционал: Симуляция пользовательского пути в генераторе тестов
  Как пользователь генератора тестов
  Я хочу проходить через интерфейс естественным образом
  Чтобы убедиться, что все взаимодействия работают корректно

  Контекст:
    Допустим я открыл приложение генератора тестов
    И страница полностью загружена

  @visual @navigation
  Сценарий: Навигация по интерфейсу с помощью Tab
    Допустим я вижу заголовок "Генерация теста"
    Когда я начинаю навигацию по интерфейсу
    И нажимаю Tab для перехода между элементами
    Тогда каждый элемент получает фокус
    И я вижу визуальные индикаторы фокуса
    И могу взаимодействовать с каждым элементом
```

### test-creation.feature
```gherkin
Функционал: Создание и редактирование тестов
  Как пользователь генератора тестов
  Я хочу создавать и редактировать тесты
  Чтобы генерировать качественные тесты ЕГЭ

  @visual @creation
  Сценарий: Создание нового теста
    Допустим я хочу создать новый тест
    Когда я выбираю типы заданий для теста
    И устанавливаю количество заданий каждого типа
    И настраиваю параметры сложности
    Тогда тест создается корректно
    И отображается сводка созданного теста
```

## Шаговые определения

### Основные шаги (step-definitions.ts)
- `Допустим я открыл приложение генератора тестов` - Открывает главную страницу
- `Допустим я вижу заголовок "Генерация теста"` - Проверяет наличие заголовка
- `Когда я нажимаю Tab для перехода между элементами` - Симулирует Tab навигацию
- `Тогда каждый элемент получает фокус` - Проверяет фокус элементов
- `Допустим у меня есть кнопка переключения темы` - Находит кнопку темы
- `Когда я кликаю по кнопке переключения темы` - Переключает тему
- `Тогда тема интерфейса меняется` - Проверяет смену темы

### Шаги создания тестов (creation-steps.ts)
- `Допустим я хочу создать новый тест` - Подготовка к созданию теста
- `Когда я выбираю типы заданий для теста` - Выбор типов заданий
- `Когда я устанавливаю количество заданий каждого типа` - Настройка количества
- `Когда я настраиваю параметры сложности` - Установка сложности
- `Тогда тест создается корректно` - Проверка создания теста

## Команды запуска

```bash
# Установить зависимости Cucumber
npm install --save-dev @cucumber/cucumber @types/cucumber

# Запуск всех Gherkin сценариев
npm run test:gherkin

# Запуск сценариев пользовательского пути
npm run test:user-journey

# Запуск сценариев создания тестов
npm run test:test-creation

# Запуск с визуальным анализом
npm run test:gherkin:visual
```

## Преимущества Gherkin подхода

### Человекочитаемость
- Сценарии написаны на русском языке
- Легко понимать бизнес-логику тестирования
- Доступно для не-технических специалистов

### Структуралированность
- Ясное разделение на Контекст, Действия, Результаты
- Логическая группировка тестов по функционалу
- Теги для категоризации (@visual, @navigation, @creation)

### Переиспользуемость
- Шаговые определения можно использовать в разных сценариях
- Легко расширять новыми сценариями
- Модульная структура шагов

## Интеграция с визуальным анализом

Каждый сценарий включает:
- Скриншоты до и после взаимодействий
- Фиксацию визуальных изменений интерфейса
- Анализ появления/исчезновения элементов
- Визуальную документацию пользовательского пути

## Примеры сценариев

### Полная симуляция пользовательского пути:
1. Открытие приложения
2. Tab-навигация по элементам
3. Исследование карточек заданий
4. Переключение темы
5. Создание теста
6. Предварительный просмотр

### Результат:
- Скриншоты каждого шага пользовательского пути
- Анализ визуальных изменений интерфейса
- Документация поведения системы на естественном языке

## Расширение сценариев

Для добавления новых сценариев:

1. Создать новый `.feature` файл в `tests/e2e/features/`
2. Добавить соответствующие шаговые определения
3. Использовать существующие шаги или создать новые
4. Добавить команды запуска в `package.json`

## Отчетность

Результаты Gherkin тестов:
- Человекочитаемые отчеты о прохождении сценариев
- Скриншоты визуальных состояний
- Детальный анализ взаимодействий
- Документация для команды разработки
