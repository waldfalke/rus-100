# UX Контракт: Панель с вкладками

## Метаданные
- **Версия**: 1.0.0
- **Статус**: В разработке
- **Последнее обновление**: 2023-05-23
- **Последний редактор**: AI

## Назначение
Компонент панели с вкладками предоставляет удобный интерфейс для переключения между различными разделами генератора тестов ЕГЭ. Панель позволяет пользователю легко переходить между этапами создания теста, просмотра результатов и управления заданиями.

## Визуальное представление
Компонент представляет собой горизонтальную панель с вкладками в верхней части интерфейса. Каждая вкладка содержит иконку и текстовую метку. Активная вкладка визуально выделяется для обозначения текущего раздела. Содержимое активной вкладки отображается ниже панели.

Основные визуальные элементы используют следующие Tailwind классы:
- Контейнер панели: `border-b border-gray-200`
- Список вкладок: `flex -mb-px space-x-8`
- Неактивная вкладка: `py-4 px-1 border-b-2 border-transparent text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300`
- Активная вкладка: `py-4 px-1 border-b-2 border-indigo-500 text-sm font-medium text-indigo-600`
- Иконка вкладки: `mr-2 h-5 w-5`
- Содержимое вкладки: `py-6`

## Состояния
- **Вкладка — неактивная**: `text-gray-500 border-transparent`
- **Вкладка — при наведении**: `text-gray-700 border-gray-300`
- **Вкладка — активная**: `text-indigo-600 border-indigo-500`
- **Вкладка — отключенная**: `text-gray-400 cursor-not-allowed`
- **Вкладка — следующий шаг**: Отображает индикатор, что данный шаг следует за текущим
- **Вкладка — предыдущий шаг**: Отображает индикатор, что данный шаг предшествует текущему

## Поведение
- Клик по вкладке активирует соответствующую вкладку и отображает её содержимое
- Активная вкладка визуально выделяется
- Отключенные вкладки не реагируют на клик
- Переходы между вкладками могут иметь плавную анимацию
- При переходе на новую вкладку текущий этап работы сохраняется
- Вкладки могут отображать индикатор состояния (например, завершенность этапа)

## Доступность
- Вкладки имеют атрибуты `role="tab"` и `aria-selected="true/false"` для обозначения активности
- Панель с вкладками имеет атрибут `role="tablist"`
- Содержимое вкладок имеет атрибут `role="tabpanel"`
- Вкладки и панели связаны атрибутами `aria-controls` и `id`
- Навигация между вкладками доступна с клавиатуры (Tab и Arrow keys)
- Отключенные вкладки имеют атрибут `aria-disabled="true"`

## Адаптивность
- На мобильных устройствах иконки становятся более компактными
- При необходимости текст вкладок сокращается или заменяется на иконки
- На очень маленьких экранах вкладки могут отображаться как выпадающий список
- При прокрутке панель с вкладками может фиксироваться вверху экрана
- Используется адаптивная система отступов в зависимости от ширины экрана

## Примеры использования
```jsx
// Пример разметки панели с вкладками
<div>
  <div className="border-b border-gray-200">
    <nav className="-mb-px flex space-x-8" aria-label="Tabs">
      {tabs.map((tab) => (
        <button
          key={tab.name}
          onClick={() => setCurrentTab(tab.id)}
          className={classNames(
            tab.id === currentTab
              ? 'border-indigo-500 text-indigo-600'
              : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300',
            'py-4 px-1 border-b-2 font-medium text-sm flex items-center',
            tab.disabled ? 'cursor-not-allowed opacity-50' : ''
          )}
          disabled={tab.disabled}
          aria-current={tab.id === currentTab ? 'page' : undefined}
          role="tab"
          aria-selected={tab.id === currentTab}
          aria-controls={`panel-${tab.id}`}
          aria-disabled={tab.disabled}
        >
          <tab.icon className="mr-2 h-5 w-5" aria-hidden="true" />
          {tab.name}
        </button>
      ))}
    </nav>
  </div>
  <div>
    {tabs.map((tab) => (
      <div
        key={`panel-${tab.id}`}
        id={`panel-${tab.id}`}
        role="tabpanel"
        aria-labelledby={tab.id}
        className={tab.id === currentTab ? 'py-6' : 'hidden'}
      >
        {tab.content}
      </div>
    ))}
  </div>
</div>
```

## Предусловия и постусловия
- **Предусловия**: 
  - Должен быть определен массив вкладок с уникальными идентификаторами
  - Для каждой вкладки должно быть определено содержимое
  - Изначальная активная вкладка должна быть указана

- **Постусловия**:
  - Содержимое активной вкладки отображается
  - Состояние активной вкладки сохраняется
  - В случае последовательного процесса (мастера) сохраняется информация о пройденных этапах

## Инварианты
- Всегда активна только одна вкладка
- Каждая вкладка имеет уникальный идентификатор
- Порядок вкладок сохраняется неизменным
- Переключение между вкладками не приводит к потере данных
- Дизайн вкладок сохраняет единый стиль в рамках всего приложения 

## Интерфейсы и типы
```typescript
// data/test-content.ts

// Типы сложности заданий
type DifficultyType = "none" | "easy" | "hard" | "both";
type DifficultyValue = "easy" | "hard" | "both" | null;

// Базовая структура элемента задания
interface TestItem {
  id: number;          // Уникальный идентификатор задания
  title: string;       // Название задания
  count?: number;      // Текущее количество заданий (по умолчанию 0)
  difficulty?: DifficultyValue;  // Текущая сложность
  difficultyType: DifficultyType; // Поддерживаемые типы сложности
  maxCount?: number;   // Максимальное количество заданий (по умолчанию 10)
}

// Категория заданий для вкладки "По заданиям"
interface TestCategory {
  category: string;    // Название категории
  items: TestItem[];   // Список заданий в категории
}

// Категория для вкладок "ЕГЭ" и "Упражнения"
interface EGECategory {
  title: string;       // Название категории
  items: TestItem[];   // Список заданий в категории
}

// Раздел для вкладок "ЕГЭ" и "Упражнения"
interface EGESection {
  title: string;       // Название раздела
  categories: EGECategory[]; // Список категорий в разделе
}
```

## Структура данных
```typescript
// Структура данных для вкладки "По заданиям"
export const tasksData: TestCategory[] = [
  {
    category: "Работа с текстом",
    items: [
      {
        id: 1,
        title: "№1. Средства связи предложений в тексте",
        count: 0,
        difficulty: "both",
        difficultyType: "both",
        maxCount: 10,
      },
      // ... другие задания
    ],
  },
  // ... другие категории
];

// Структура данных для вкладки "ЕГЭ"
export const egeFormatData: EGESection[] = [
  {
    title: "Часть 1",
    categories: [
      {
        title: "Работа с текстом",
        items: [
          // ... задания
        ],
      },
      // ... другие категории
    ],
  },
  // ... другие разделы
];

// Структура данных для вкладки "Упражнения"
export const exercisesData: EGESection[] = [
  {
    title: "Орфография",
    categories: [
      {
        title: "Правописание приставок",
        items: [
          // ... задания
        ],
      },
      // ... другие категории
    ],
  },
  // ... другие разделы
];
```

## Предусловия
- Файл test-content.ts должен определять все необходимые типы и интерфейсы
- Все задания должны иметь уникальные идентификаторы
- Значения difficultyType должны быть корректными для каждого задания
- Начальные значения count должны быть установлены в 0

## Постусловия
- Данные о заданиях доступны в компоненте TestGenerator
- Структура данных позволяет эффективно работать со всеми тремя режимами создания тестов

## Инварианты
- Идентификаторы заданий должны быть уникальными в пределах всего набора данных
- Каждое задание должно принадлежать к определенной категории
- Значения difficultyType должны соответствовать одному из предопределенных типов
- Максимальное количество заданий должно быть положительным числом

## Примеры использования
```typescript
// Импорт данных в компоненте TestGenerator
import { tasksData, egeFormatData, exercisesData } from "@/data/test-content";

// Инициализация состояния в компоненте
const [tasksDataState, setTasksDataState] = useState(tasksData);
const [egeFormatDataState, setEgeFormatDataState] = useState(egeFormatData);
const [exercisesDataState, setExercisesDataState] = useState(exercisesData);
```

## Связанные контракты
- [Контракт компонента: TestGenerator](./Component-TestGenerator.md)
- [UX Контракт: Карточка задания](./UX-TaskCard.md)
- [UX Контракт: Раздел категории заданий](./UX-CategorySection.md)
- [UX Контракт: Индикатор прогресса](./UX-ProgressIndicator.md) 
- [Исправление бага: Размеры панели с вкладками](./bugfixes/TabPanel-Size-Bugfix-Contract.md) 