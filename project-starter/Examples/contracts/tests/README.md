# Техническое тестирование контрактов CATMEPIM

Этот каталог содержит тесты для проверки контрактов модулей CATMEPIM. Тесты проверяют внутреннюю согласованность контрактов, их совместимость между собой и возможность реализации.

> **Примечание**: Для онтологического тестирования контрактов, которое фокусируется на концептуальной целостности и семантической точности, см. каталог [ontological](./ontological/).

## Структура каталога

```
tests/
├── java/                      # Тесты для Java-контрактов
│   ├── converter/             # Тесты для контрактов модуля Converter
│   ├── deduplicator/          # Тесты для контрактов модуля Deduplicator
│   ├── database-loader/       # Тесты для контрактов модуля DatabaseLoader
│   ├── data-analyzer/         # Тесты для контрактов модуля DataAnalyzer
│   └── integration/           # Интеграционные тесты между контрактами
├── schema/                    # Тесты для JSON-схем
│   ├── converter/             # Тесты для схем модуля Converter
│   ├── deduplicator/          # Тесты для схем модуля Deduplicator
│   └── integration/           # Тесты совместимости схем
├── static/                    # Статический анализ контрактов
│   ├── consistency/           # Проверка внутренней согласованности
│   └── compatibility/         # Проверка совместимости между контрактами
└── utils/                     # Утилиты для тестирования
    ├── contract_parser.py     # Парсер контрактов из Markdown
    ├── schema_validator.py    # Валидатор JSON-схем
    └── mock_generator.py      # Генератор mock-реализаций
```

## Типы тестов

### 1. Статический анализ контрактов

Проверяет внутреннюю согласованность контрактов:
- Отсутствие противоречий между предусловиями, постусловиями и инвариантами
- Полнота описания (все методы имеют предусловия и постусловия)
- Согласованность типов данных

### 2. Тесты совместимости контрактов

Проверяет совместимость между контрактами разных модулей:
- Совместимость выходных данных одного модуля с входными данными другого
- Согласованность обработки ошибок
- Согласованность типов данных

### 3. Тесты реализуемости контрактов

Проверяет возможность реализации контрактов:
- Создание минимальных реализаций контрактов
- Проверка граничных условий
- Проверка инвариантов

### 4. Тесты JSON-схем

Проверяет корректность и совместимость JSON-схем:
- Валидация схем на соответствие стандарту JSON Schema
- Проверка совместимости схем между модулями
- Тестирование на примерах данных

## Запуск тестов

### Java-тесты

```bash
cd contracts
mvn test
```

### Python-тесты

```bash
cd contracts
pytest tests/
```

## Добавление новых тестов

1. Создайте тест в соответствующей директории
2. Следуйте шаблону существующих тестов
3. Убедитесь, что тест проверяет конкретный аспект контракта
4. Добавьте документацию к тесту

## Интеграция с CI/CD

Тесты контрактов запускаются автоматически при каждом изменении контрактов через GitHub Actions.
