import{j as e}from"./jsx-runtime-DoEZbXM1.js";import{C as w,c as V}from"./card-CovcHCaV.js";import{B as g}from"./button-DWZKWoqU.js";import{B as f}from"./badge-BhI_kZ9I.js";import{T}from"./task-category-selector-CyPtx4Pg.js";import{D}from"./dice-3-DukkMB4k.js";const h=({item:n,category:_,currentCount:i,maxCount:b,onDecrement:N,onIncrement:v,difficulties:a,onDifficultyChange:c,categories:j,onCategoriesChange:C,itemStats:o,difficultyTiers:k,difficultyDropdown:u,categoryDropdown:m,layout:p="auto",controlsClassName:q=""})=>{var y;const x=(y=n.title.match(/№\s*(\d+)/))==null?void 0:y[1];let l="flex flex-wrap gap-x-4 gap-y-2";return p==="vertical"?l+=" flex-col items-start":p==="horizontal"?l+=" flex-row items-center":l+=" flex-col sm:flex-row items-start sm:items-center",e.jsx(w,{className:"border border-gray-200 mb-2",children:e.jsx(V,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[e.jsx("div",{className:"flex-grow pr-2",children:e.jsx("span",{className:"text-sm text-gray-800",children:n.title})}),e.jsxs("div",{className:`task-card-block-controls ${l} ${q}`,children:[m||x&&e.jsx(T,{taskNumber:x,selectedCategories:j,onCategoriesChange:C}),e.jsx("div",{className:"flex flex-wrap gap-1.5 items-center",children:u||(o?e.jsxs(e.Fragment,{children:[e.jsxs(f,{variant:!a||a.includes("any")?"default":"outline",onClick:()=>c("any"),className:`cursor-pointer transition-colors px-2 py-0.5 flex items-center gap-1 ${!a||a.includes("any")?"bg-teal-600 hover:bg-teal-700 text-white border-teal-600":"border-gray-300 text-gray-700 hover:bg-gray-100"}`,role:"radio","aria-checked":!a||a.includes("any"),tabIndex:0,children:[e.jsx(D,{className:"w-3 h-3"}),e.jsx("span",{className:"text-sm",children:"Любая"}),e.jsxs("span",{className:"text-sm font-semibold leading-5",children:["(",String(Object.values(o).reduce((r,s)=>Number(r)+Number(s),0)),")"]})]},`${n.id}-any`),k.map(r=>{const s=o[r.id]||0,t=s===0,d=a==null?void 0:a.includes(r.id);return e.jsxs(f,{variant:d&&!t?"default":"outline",onClick:()=>!t&&c(r.id),className:`cursor-pointer transition-colors px-2 py-0.5 ${t?"cursor-not-allowed opacity-50 bg-gray-100 text-gray-400 border-gray-200":d?"bg-teal-600 hover:bg-teal-700 text-white border-teal-600":"border-gray-300 text-gray-700 hover:bg-gray-100"}`,"aria-disabled":t,role:"radio","aria-checked":d&&!t,tabIndex:t?-1:0,children:[e.jsx("span",{className:"text-sm",children:r.label}),e.jsxs("span",{className:"text-sm font-semibold leading-5",children:["(",s,")"]})]},`${n.id}-${r.id}`)})]}):e.jsx("span",{className:"text-xs text-gray-400 italic",children:"Нет данных о сложности"}))}),e.jsxs("div",{className:"flex items-center space-x-1.5 flex-shrink-0",children:[e.jsx(g,{variant:"outline",size:"icon",className:"h-6 w-6",onClick:N,disabled:i<=0,children:"-"}),e.jsx("span",{className:"text-sm font-semibold leading-5 w-8 text-center tabular-nums",children:i}),e.jsx(g,{variant:"outline",size:"icon",className:"h-6 w-6",onClick:v,disabled:i>=b,children:"+"})]})]})]})})})};try{h.displayName="TaskCardBlock",h.__docgenInfo={description:"",displayName:"TaskCardBlock",props:{item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"any"}},category:{defaultValue:null,description:"",name:"category",required:!0,type:{name:"any"}},currentCount:{defaultValue:null,description:"",name:"currentCount",required:!0,type:{name:"number"}},maxCount:{defaultValue:null,description:"",name:"maxCount",required:!0,type:{name:"number"}},onDecrement:{defaultValue:null,description:"",name:"onDecrement",required:!0,type:{name:"() => void"}},onIncrement:{defaultValue:null,description:"",name:"onIncrement",required:!0,type:{name:"() => void"}},difficulties:{defaultValue:null,description:"",name:"difficulties",required:!0,type:{name:"string[]"}},onDifficultyChange:{defaultValue:null,description:"",name:"onDifficultyChange",required:!0,type:{name:"(difficultyId: string) => void"}},categories:{defaultValue:null,description:"",name:"categories",required:!0,type:{name:"string[]"}},onCategoriesChange:{defaultValue:null,description:"",name:"onCategoriesChange",required:!0,type:{name:"(categories: string[]) => void"}},itemStats:{defaultValue:null,description:"",name:"itemStats",required:!0,type:{name:"any"}},difficultyTiers:{defaultValue:null,description:"",name:"difficultyTiers",required:!0,type:{name:"{ id: string; label: string; }[]"}},difficultyDropdown:{defaultValue:null,description:"",name:"difficultyDropdown",required:!1,type:{name:"ReactNode"}},categoryDropdown:{defaultValue:null,description:"",name:"categoryDropdown",required:!1,type:{name:"ReactNode"}},layout:{defaultValue:{value:"auto"},description:"",name:"layout",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"auto"'},{value:'"horizontal"'},{value:'"vertical"'}]}},controlsClassName:{defaultValue:{value:""},description:"",name:"controlsClassName",required:!1,type:{name:"string | undefined"}}}}}catch{}export{h as T};
//# sourceMappingURL=TaskCardBlock-CiEdU8zU.js.map
