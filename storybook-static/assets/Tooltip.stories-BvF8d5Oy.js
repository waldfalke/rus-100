import{j as a}from"./jsx-runtime-DoEZbXM1.js";import{r as s}from"./index-DWtqY3O_.js";import{a as ae,c as C}from"./index-DHaFAply.js";import{u as J,a as le}from"./index-BghTMhg4.js";import{c as ce}from"./index-4JJ3X7d3.js";import{c as Q,R as pe,A as de,D as ue,C as fe,a as me}from"./index-C9Cbq-BE.js";import{u as Te}from"./index-k2os2MFt.js";import{P as he}from"./index-BAy4v6XH.js";import{P as ve}from"./index-h8DnG9fi.js";import{R as xe}from"./index-DcNUn0CK.js";import{c as ge}from"./utils-CytzSlOG.js";import"./jsx-runtime-Bw5QeaCk.js";import"./index-DZJH1aMv.js";import"./index-CWNAz4Fr.js";import"./index-BnuSz0lM.js";var[A,Ze]=ce("Tooltip",[Q]),I=Q(),Z="TooltipProvider",ye=700,H="tooltip.open",[Ce,G]=A(Z),ee=e=>{const{__scopeTooltip:o,delayDuration:t=ye,skipDelayDuration:r=300,disableHoverableContent:n=!1,children:l}=e,[p,m]=s.useState(!0),i=s.useRef(!1),u=s.useRef(0);return s.useEffect(()=>{const c=u.current;return()=>window.clearTimeout(c)},[]),a.jsx(Ce,{scope:o,isOpenDelayed:p,delayDuration:t,onOpen:s.useCallback(()=>{window.clearTimeout(u.current),m(!1)},[]),onClose:s.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>m(!0),r)},[r]),isPointerInTransitRef:i,onPointerInTransitChange:s.useCallback(c=>{i.current=c},[]),disableHoverableContent:n,children:l})};ee.displayName=Z;var k="Tooltip",[be,S]=A(k),te=e=>{const{__scopeTooltip:o,children:t,open:r,defaultOpen:n=!1,onOpenChange:l,disableHoverableContent:p,delayDuration:m}=e,i=G(k,e.__scopeTooltip),u=I(o),[c,f]=s.useState(null),h=Te(),d=s.useRef(0),T=p??i.disableHoverableContent,x=m??i.delayDuration,v=s.useRef(!1),[y=!1,g]=ae({prop:r,defaultProp:n,onChange:V=>{V?(i.onOpen(),document.dispatchEvent(new CustomEvent(H))):i.onClose(),l==null||l(V)}}),w=s.useMemo(()=>y?v.current?"delayed-open":"instant-open":"closed",[y]),E=s.useCallback(()=>{window.clearTimeout(d.current),d.current=0,v.current=!1,g(!0)},[g]),R=s.useCallback(()=>{window.clearTimeout(d.current),d.current=0,g(!1)},[g]),F=s.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>{v.current=!0,g(!0),d.current=0},x)},[x,g]);return s.useEffect(()=>()=>{d.current&&(window.clearTimeout(d.current),d.current=0)},[]),a.jsx(pe,{...u,children:a.jsx(be,{scope:o,contentId:h,open:y,stateAttribute:w,trigger:c,onTriggerChange:f,onTriggerEnter:s.useCallback(()=>{i.isOpenDelayed?F():E()},[i.isOpenDelayed,F,E]),onTriggerLeave:s.useCallback(()=>{T?R():(window.clearTimeout(d.current),d.current=0)},[R,T]),onOpen:E,onClose:R,disableHoverableContent:T,children:t})})};te.displayName=k;var M="TooltipTrigger",oe=s.forwardRef((e,o)=>{const{__scopeTooltip:t,...r}=e,n=S(M,t),l=G(M,t),p=I(t),m=s.useRef(null),i=J(o,m,n.onTriggerChange),u=s.useRef(!1),c=s.useRef(!1),f=s.useCallback(()=>u.current=!1,[]);return s.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),a.jsx(de,{asChild:!0,...p,children:a.jsx(ve.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...r,ref:i,onPointerMove:C(e.onPointerMove,h=>{h.pointerType!=="touch"&&!c.current&&!l.isPointerInTransitRef.current&&(n.onTriggerEnter(),c.current=!0)}),onPointerLeave:C(e.onPointerLeave,()=>{n.onTriggerLeave(),c.current=!1}),onPointerDown:C(e.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:C(e.onFocus,()=>{u.current||n.onOpen()}),onBlur:C(e.onBlur,n.onClose),onClick:C(e.onClick,n.onClose)})})});oe.displayName=M;var _e="TooltipPortal",[et,Pe]=A(_e,{forceMount:void 0}),b="TooltipContent",re=s.forwardRef((e,o)=>{const t=Pe(b,e.__scopeTooltip),{forceMount:r=t.forceMount,side:n="top",...l}=e,p=S(b,e.__scopeTooltip);return a.jsx(he,{present:r||p.open,children:p.disableHoverableContent?a.jsx(ne,{side:n,...l,ref:o}):a.jsx(we,{side:n,...l,ref:o})})}),we=s.forwardRef((e,o)=>{const t=S(b,e.__scopeTooltip),r=G(b,e.__scopeTooltip),n=s.useRef(null),l=J(o,n),[p,m]=s.useState(null),{trigger:i,onClose:u}=t,c=n.current,{onPointerInTransitChange:f}=r,h=s.useCallback(()=>{m(null),f(!1)},[f]),d=s.useCallback((T,x)=>{const v=T.currentTarget,y={x:T.clientX,y:T.clientY},g=De(y,v.getBoundingClientRect()),w=Oe(y,g),E=Le(x.getBoundingClientRect()),R=Ae([...w,...E]);m(R),f(!0)},[f]);return s.useEffect(()=>()=>h(),[h]),s.useEffect(()=>{if(i&&c){const T=v=>d(v,c),x=v=>d(v,i);return i.addEventListener("pointerleave",T),c.addEventListener("pointerleave",x),()=>{i.removeEventListener("pointerleave",T),c.removeEventListener("pointerleave",x)}}},[i,c,d,h]),s.useEffect(()=>{if(p){const T=x=>{const v=x.target,y={x:x.clientX,y:x.clientY},g=(i==null?void 0:i.contains(v))||(c==null?void 0:c.contains(v)),w=!Ne(y,p);g?h():w&&(h(),u())};return document.addEventListener("pointermove",T),()=>document.removeEventListener("pointermove",T)}},[i,c,p,u,h]),a.jsx(ne,{...e,ref:l})}),[Ee,Re]=A(k,{isInside:!1}),ne=s.forwardRef((e,o)=>{const{__scopeTooltip:t,children:r,"aria-label":n,onEscapeKeyDown:l,onPointerDownOutside:p,...m}=e,i=S(b,t),u=I(t),{onClose:c}=i;return s.useEffect(()=>(document.addEventListener(H,c),()=>document.removeEventListener(H,c)),[c]),s.useEffect(()=>{if(i.trigger){const f=h=>{const d=h.target;d!=null&&d.contains(i.trigger)&&c()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[i.trigger,c]),a.jsx(ue,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:l,onPointerDownOutside:p,onFocusOutside:f=>f.preventDefault(),onDismiss:c,children:a.jsxs(fe,{"data-state":i.stateAttribute,...u,...m,ref:o,style:{...m.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(le,{children:r}),a.jsx(Ee,{scope:t,isInside:!0,children:a.jsx(xe,{id:i.contentId,role:"tooltip",children:n||r})})]})})});re.displayName=b;var se="TooltipArrow",je=s.forwardRef((e,o)=>{const{__scopeTooltip:t,...r}=e,n=I(t);return Re(se,t).isInside?null:a.jsx(me,{...n,...r,ref:o})});je.displayName=se;function De(e,o){const t=Math.abs(o.top-e.y),r=Math.abs(o.bottom-e.y),n=Math.abs(o.right-e.x),l=Math.abs(o.left-e.x);switch(Math.min(t,r,n,l)){case l:return"left";case n:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Oe(e,o,t=5){const r=[];switch(o){case"top":r.push({x:e.x-t,y:e.y+t},{x:e.x+t,y:e.y+t});break;case"bottom":r.push({x:e.x-t,y:e.y-t},{x:e.x+t,y:e.y-t});break;case"left":r.push({x:e.x+t,y:e.y-t},{x:e.x+t,y:e.y+t});break;case"right":r.push({x:e.x-t,y:e.y-t},{x:e.x-t,y:e.y+t});break}return r}function Le(e){const{top:o,right:t,bottom:r,left:n}=e;return[{x:n,y:o},{x:t,y:o},{x:t,y:r},{x:n,y:r}]}function Ne(e,o){const{x:t,y:r}=e;let n=!1;for(let l=0,p=o.length-1;l<o.length;p=l++){const m=o[l].x,i=o[l].y,u=o[p].x,c=o[p].y;i>r!=c>r&&t<(u-m)*(r-i)/(c-i)+m&&(n=!n)}return n}function Ae(e){const o=e.slice();return o.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),Ie(o)}function Ie(e){if(e.length<=1)return e.slice();const o=[];for(let r=0;r<e.length;r++){const n=e[r];for(;o.length>=2;){const l=o[o.length-1],p=o[o.length-2];if((l.x-p.x)*(n.y-p.y)>=(l.y-p.y)*(n.x-p.x))o.pop();else break}o.push(n)}o.pop();const t=[];for(let r=e.length-1;r>=0;r--){const n=e[r];for(;t.length>=2;){const l=t[t.length-1],p=t[t.length-2];if((l.x-p.x)*(n.y-p.y)>=(l.y-p.y)*(n.x-p.x))t.pop();else break}t.push(n)}return t.pop(),o.length===1&&t.length===1&&o[0].x===t[0].x&&o[0].y===t[0].y?o:o.concat(t)}var ke=ee,Se=te,He=oe,ie=re;const j=ke,_=Se,D=He,P=s.forwardRef(({className:e,sideOffset:o=4,...t},r)=>a.jsx(ie,{ref:r,sideOffset:o,className:ge("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));P.displayName=ie.displayName;try{_.displayName="Tooltip",_.__docgenInfo={description:"",displayName:"Tooltip",props:{}}}catch{}try{D.displayName="TooltipTrigger",D.__docgenInfo={description:"",displayName:"TooltipTrigger",props:{asChild:{defaultValue:null,description:"",name:"asChild",required:!1,type:{name:"boolean | undefined"}}}}}catch{}try{P.displayName="TooltipContent",P.__docgenInfo={description:"",displayName:"TooltipContent",props:{asChild:{defaultValue:null,description:"",name:"asChild",required:!1,type:{name:"boolean | undefined"}}}}}catch{}try{j.displayName="TooltipProvider",j.__docgenInfo={description:"",displayName:"TooltipProvider",props:{}}}catch{}const tt={title:"UI/Tooltip",component:_,tags:["autodocs"]},O={render:()=>a.jsx(j,{children:a.jsxs(_,{children:[a.jsx(D,{children:a.jsx("button",{children:"Hover me"})}),a.jsx(P,{children:"Tooltip content"})]})})},L={render:()=>a.jsx(j,{children:a.jsxs(_,{children:[a.jsx(D,{children:a.jsx("button",{children:"Наведи для длинного текста"})}),a.jsx(P,{children:"Это очень длинный текст тултипа, который демонстрирует перенос строк и адаптацию размера."})]})})},N={render:()=>a.jsx(j,{children:a.jsxs(_,{children:[a.jsx(D,{children:a.jsx("button",{children:"Наведи для тултипа справа"})}),a.jsx(P,{side:"right",children:"Tooltip справа"})]})})};var q,B,U;O.parameters={...O.parameters,docs:{...(q=O.parameters)==null?void 0:q.docs,source:{originalSource:`{
  render: () => <TooltipProvider>\r
      <Tooltip>\r
        <TooltipTrigger>\r
          <button>Hover me</button>\r
        </TooltipTrigger>\r
        <TooltipContent>\r
          Tooltip content\r
        </TooltipContent>\r
      </Tooltip>\r
    </TooltipProvider>
}`,...(U=(B=O.parameters)==null?void 0:B.docs)==null?void 0:U.source}}};var $,z,Y;L.parameters={...L.parameters,docs:{...($=L.parameters)==null?void 0:$.docs,source:{originalSource:`{
  render: () => <TooltipProvider>\r
      <Tooltip>\r
        <TooltipTrigger>\r
          <button>Наведи для длинного текста</button>\r
        </TooltipTrigger>\r
        <TooltipContent>\r
          Это очень длинный текст тултипа, который демонстрирует перенос строк и адаптацию размера.\r
        </TooltipContent>\r
      </Tooltip>\r
    </TooltipProvider>
}`,...(Y=(z=L.parameters)==null?void 0:z.docs)==null?void 0:Y.source}}};var X,K,W;N.parameters={...N.parameters,docs:{...(X=N.parameters)==null?void 0:X.docs,source:{originalSource:`{
  render: () => <TooltipProvider>\r
      <Tooltip>\r
        <TooltipTrigger>\r
          <button>Наведи для тултипа справа</button>\r
        </TooltipTrigger>\r
        <TooltipContent side="right">\r
          Tooltip справа\r
        </TooltipContent>\r
      </Tooltip>\r
    </TooltipProvider>
}`,...(W=(K=N.parameters)==null?void 0:K.docs)==null?void 0:W.source}}};const ot=["Default","LongText","CustomPosition"];export{N as CustomPosition,O as Default,L as LongText,ot as __namedExportsOrder,tt as default};
//# sourceMappingURL=Tooltip.stories-BvF8d5Oy.js.map
