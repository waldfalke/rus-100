{"version":3,"file":"TaskCardBlock-CiEdU8zU.js","sources":["../../components/ui/TaskCardBlock.tsx"],"sourcesContent":["import React from \"react\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Dice3 } from \"lucide-react\";\nimport { TaskCategorySelector } from \"./task-category-selector\";\n\ninterface TaskCardBlockProps {\n  item: any;\n  category: any;\n  currentCount: number;\n  maxCount: number;\n  onDecrement: () => void;\n  onIncrement: () => void;\n  difficulties: string[];\n  onDifficultyChange: (difficultyId: string) => void;\n  categories: string[];\n  onCategoriesChange: (categories: string[]) => void;\n  itemStats: any;\n  difficultyTiers: { id: string; label: string }[];\n  difficultyDropdown?: React.ReactNode;\n  categoryDropdown?: React.ReactNode;\n  layout?: \"auto\" | \"vertical\" | \"horizontal\";\n  controlsClassName?: string;\n}\n\nexport const TaskCardBlock: React.FC<TaskCardBlockProps> = ({\n  item,\n  category,\n  currentCount,\n  maxCount,\n  onDecrement,\n  onIncrement,\n  difficulties,\n  onDifficultyChange,\n  categories,\n  onCategoriesChange,\n  itemStats,\n  difficultyTiers,\n  difficultyDropdown,\n  categoryDropdown,\n  layout = \"auto\",\n  controlsClassName = \"\",\n}) => {\n  // Извлекаем номер задания из заголовка\n  const taskNumber = item.title.match(/№\\s*(\\d+)/)?.[1];\n\n  // Определяем классы для layout\n  let controlsLayoutClass = \"flex flex-wrap gap-x-4 gap-y-2\";\n  if (layout === \"vertical\") {\n    controlsLayoutClass += \" flex-col items-start\";\n  } else if (layout === \"horizontal\") {\n    controlsLayoutClass += \" flex-row items-center\";\n  } else {\n    controlsLayoutClass += \" flex-col sm:flex-row items-start sm:items-center\";\n  }\n\n  return (\n    <Card className=\"border border-gray-200 mb-2\">\n      <CardContent className=\"p-3 sm:p-4\">\n        <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3\">\n          {/* Название задания */}\n          <div className=\"flex-grow pr-2\">\n            <span className=\"text-sm text-gray-800\">{item.title}</span>\n          </div>\n\n          {/* Все интерактивные элементы справа */}\n          <div className={`task-card-block-controls ${controlsLayoutClass} ${controlsClassName}`}>\n            {/* Категории */}\n            {categoryDropdown ? (\n              categoryDropdown\n            ) : taskNumber && (\n              <TaskCategorySelector\n                taskNumber={taskNumber}\n                selectedCategories={categories}\n                onCategoriesChange={onCategoriesChange}\n              />\n            )}\n\n            {/* Чипсы сложности для этого задания */}\n            <div className=\"flex flex-wrap gap-1.5 items-center\">\n              {difficultyDropdown ? (\n                difficultyDropdown\n              ) : itemStats ? (\n                <>\n                  {/* \"Любая\" Badge */}\n                  <Badge\n                    key={`${item.id}-any`}\n                    variant={(!difficulties || difficulties.includes('any')) ? \"default\" : \"outline\"}\n                    onClick={() => onDifficultyChange('any')}\n                    className={`cursor-pointer transition-colors px-2 py-0.5 flex items-center gap-1 ${\n                      !difficulties || difficulties.includes('any')\n                        ? \"bg-teal-600 hover:bg-teal-700 text-white border-teal-600\"\n                        : \"border-gray-300 text-gray-700 hover:bg-gray-100\"\n                    }`}\n                    role=\"radio\"\n                    aria-checked={!difficulties || difficulties.includes('any')}\n                    tabIndex={0}\n                  >\n                    <Dice3 className=\"w-3 h-3\" />\n                    <span className=\"text-sm\">Любая</span>\n                    <span className=\"text-sm font-semibold leading-5\">({String(Object.values(itemStats).reduce((sum, count) => Number(sum) + Number(count), 0))})</span>\n                  </Badge>\n\n                  {/* Tier-specific Badges */}\n                  {difficultyTiers.map(tier => {\n                    const countForItemTier = itemStats[tier.id] || 0;\n                    const isDisabled = countForItemTier === 0;\n                    const isSelected = difficulties?.includes(tier.id);\n\n                    return (\n                      <Badge\n                        key={`${item.id}-${tier.id}`}\n                        variant={isSelected && !isDisabled ? \"default\" : \"outline\"}\n                        onClick={() => !isDisabled && onDifficultyChange(tier.id)}\n                        className={`cursor-pointer transition-colors px-2 py-0.5 ${\n                          isDisabled\n                            ? \"cursor-not-allowed opacity-50 bg-gray-100 text-gray-400 border-gray-200\"\n                            : isSelected\n                            ? \"bg-teal-600 hover:bg-teal-700 text-white border-teal-600\"\n                            : \"border-gray-300 text-gray-700 hover:bg-gray-100\"\n                        }`}\n                        aria-disabled={isDisabled}\n                        role=\"radio\"\n                        aria-checked={isSelected && !isDisabled}\n                        tabIndex={isDisabled ? -1 : 0}\n                      >\n                        <span className=\"text-sm\">{tier.label}</span>\n                        <span className=\"text-sm font-semibold leading-5\">({countForItemTier})</span>\n                      </Badge>\n                    );\n                  })}\n                </>\n              ) : (\n                <span className=\"text-xs text-gray-400 italic\">Нет данных о сложности</span>\n              )}\n            </div>\n\n            {/* Кнопки +/- */}\n            <div className=\"flex items-center space-x-1.5 flex-shrink-0\">\n              <Button\n                variant=\"outline\"\n                size=\"icon\"\n                className=\"h-6 w-6\"\n                onClick={onDecrement}\n                disabled={currentCount <= 0}\n              >\n                -\n              </Button>\n              <span className=\"text-sm font-semibold leading-5 w-8 text-center tabular-nums\">{currentCount}</span>\n              <Button\n                variant=\"outline\"\n                size=\"icon\"\n                className=\"h-6 w-6\"\n                onClick={onIncrement}\n                disabled={currentCount >= maxCount}\n              >\n                +\n              </Button>\n            </div>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}; "],"names":["TaskCardBlock","item","category","currentCount","maxCount","onDecrement","onIncrement","difficulties","onDifficultyChange","categories","onCategoriesChange","itemStats","difficultyTiers","difficultyDropdown","categoryDropdown","layout","controlsClassName","taskNumber","_a","controlsLayoutClass","_jsx","Card","CardContent","_jsxs","_Fragment","sum","count","tier","countForItemTier","isDisabled","isSelected","Badge"],"mappings":"qQA0BO,MAAAA,EAAA,CAAA,CAAA,KAAAC,EAAA,SAAAC,EAAA,aAAAC,EAAA,SAAAC,EAAA,YAAAC,EAAA,YAAAC,EAAA,aAAAC,EAAA,mBAAAC,EAAA,WAAAC,EAAA,mBAAAC,EAAA,UAAAC,EAAA,gBAAAC,EAAA,mBAAAC,EAAA,iBAAAC,EAAA,OAAAC,EAAA,OAAA,kBAAAC,EAAA,MAAA,OAmBL,MAAAC,GAAAC,EAAAjB,EAAA,MAAA,MAAA,WAAA,IAAA,YAAAiB,EAAA,GAGA,IAAAC,EAAA,iCACA,OAAAJ,IAAA,WACEI,GAAA,wBAAuBJ,IAAA,aAEvBI,GAAA,yBAEAA,GAAA,oDAGFC,EAAAA,IAAAC,EAAA,CACO,UAAA,8BAAW,SAAAD,EAAA,IAAAE,EAAA,CACF,UAAA,aAAW,SAAAC,EAAA,KAAA,MAAA,CACjB,UAAA,8EAAW,SAAA,cAET,UAAA,iBAAW,SAAAH,EAAA,IAAA,OAAA,CACR,UAAA,wBAAW,SAAAnB,EAAA,KAA8B,CAAA,kBAI5C,UAAA,4BAAAkB,CAAA,IAAAH,CAAA,GAAgF,SAAA,gBAK5D,WAAAC,EAClB,mBAAAR,EACoB,mBAAAC,CACpB,CAAA,eAKA,UAAA,sCAAW,SAAAG,IAAAF,EAAAY,EAAAA,KAAAC,EAAAA,SAAA,CAIV,SAAA,WAEM,QAAA,CAAAjB,GAAAA,EAAA,SAAA,KAAA,EAAA,UAAA,UAEoE,QAAA,IAAAC,EAAA,KAAA,EAChC,UAAA,wEAAA,CAAAD,GAAAA,EAAA,SAAA,KAAA,EAAA,2DAAA,iDAAA,GAKrC,KAAA,QACG,eAAA,CAAAA,GAAAA,EAAA,SAAA,KAAA,EACqD,SAAA,EAChD,SAAA,UAEJ,UAAA,SAAW,CAAA,gBACZ,UAAA,UAAW,SAAA,OAAU,CAAA,iBACrB,UAAA,kCAAW,SAAA,KAAkC,OAAA,OAAA,OAAAI,CAAA,EAAA,OAAA,CAAAc,EAAAC,IAAA,OAAAD,CAAA,EAAA,OAAAC,CAAA,EAAA,CAAA,CAAA,EAAwF,GAAE,qBAdvHd,EAAA,IAAAe,GAAA,CAmBrB,MAAAC,EAAAjB,EAAAgB,EAAA,EAAA,GAAA,EACAE,EAAAD,IAAA,EACAE,EAAAvB,GAAA,YAAAA,EAAA,SAAAoB,EAAA,IAEA,OAAAJ,EAAAA,KAAAQ,EAAA,CACO,QAAAD,GAAA,CAAAD,EAAA,UAAA,UAE8C,QAAA,IAAA,CAAAA,GAAArB,EAAAmB,EAAA,EAAA,EACO,UAAA,gDAAAE,EAAA,0EAAAC,EAAA,2DAAA,iDAAA,GAOtD,gBAAAD,EACa,KAAA,QACV,eAAAC,GAAA,CAAAD,EACwB,SAAAA,EAAA,GAAA,EACD,SAAA,eAEvB,UAAA,UAAW,SAAAF,EAAA,KAAgB,CAAA,iBAC3B,UAAA,kCAAW,SAAA,KAAkCC,EAAE,GAAiB,wBAhBzC,CAAA,CAmBjC,kBAGE,UAAA,+BAAW,SAAA,wBAA+B,CAAA,mBAK/C,UAAA,8CAAW,SAAA,UACP,QAAA,UACI,KAAA,OACH,UAAA,UACK,QAAAvB,EACD,SAAAF,GAAA,EACiB,SAAA,GAC5B,CAAA,gBAGK,UAAA,+DAAW,SAAAA,CAAgE,CAAA,WAC1E,QAAA,UACI,KAAA,OACH,UAAA,UACK,QAAAG,EACD,SAAAH,GAAAC,EACiB,SAAA,GAC5B,CAAA,cASd"}