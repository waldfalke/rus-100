class MenuTestFolderDTO {}

class MenuController {
    constructor() {
        $(".menu-toggle").click((function() {
            $(".top-menu").toggleClass("unfolded");
        }));
        $(".menu-item-tests").on("mouseenter", this.onTestsHover.bind(this));
    }
    onTestsHover() {
        let $menuCont = $(".menu-item-tests .menu-dropdown");
        if ($menuCont.is(":empty")) {
            this.loadMenu();
        }
    }
    async loadMenu() {
        this.items = await (new GetMenuTestFoldersRequest).exec();
        this.showTestsMenu();
    }
    showTestsMenu() {
        let $menuCont = $(".menu-item-tests .menu-dropdown");
        $menuCont.empty();
        for (let item of this.items) {
            $menuCont.append(`<a href="${item.url}">${item.title}</a>`);
        }
    }
}

class GetMenuTestFoldersRequest extends JsonApiReplyUseCase {
    constructor() {
        super("GET", "/api3/menuTestFolders", undefined);
    }
}