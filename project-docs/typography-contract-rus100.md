# Контракт на внедрение типографической системы Rus100

## 1. Описание проекта

Данный контракт описывает процесс внедрения новой типографической системы для образовательной платформы Rus100. Целью проекта является улучшение читаемости контента, создание четкой визуальной иерархии и обеспечение оптимального пользовательского опыта для учащихся старших классов и учителей при работе с контентом по русскому языку.

## 2. Определения

- **Типографическая система** — набор правил, стандартов и компонентов, определяющих использование шрифтов, размеров, интервалов и других аспектов типографики в рамках проекта.
- **Дизайн-токены** — набор переменных, определяющих визуальные параметры интерфейса, включая типографику, хранящийся в `design-system/tokens/`.
- **Компоненты типографики** — ReactJS компоненты, обеспечивающие консистентное отображение типографических элементов.
- **Шрифтовая пара** — комбинация основного (Inter) и дополнительного (**Source Serif Pro**) шрифтов.
- **Webpack конфигурация** — настройки сборки проекта, требующие особого внимания при внедрении новых шрифтов.

## 3. Объем работ

**ВАЖНОЕ ОГРАНИЧЕНИЕ ДЛЯ ИИ АССИСТЕНТА:** Все описанные ниже задачи по модификации и разработке должны выполняться ИИ ассистентом **строго в рамках изменения типографики**. Это включает в себя изменение семейства шрифтов, размеров, начертаний (веса), межстрочных интервалов и связанных с ними конфигурационных файлов (токены, Tailwind CSS, настройки Next.js). **ИИ не должен изменять:**
-   Общий дизайн и макет компонентов или страниц.
-   Цветовую схему (кроме случаев, когда это напрямую связано с обеспечением читаемости нового шрифта и согласовано отдельно).
-   Отступы, поля, размеры блоков, не связанные с текстовым содержимым.
-   Логику работы компонентов.
-   Структуру JSX, за исключением добавления/изменения CSS-классов для типографики.
Любые предложения по изменениям, выходящим за рамки этих ограничений, должны быть явно обозначены и утверждены пользователем.

### 3.1. Техническая реализация

#### 3.1.1. Настройка шрифтов

- Интеграция шрифта **Source Serif Pro** через Next.js Font API с поддержкой кириллицы (для использования в заголовках и акцентах).
- Конфигурирование с учетом существующей настройки шрифта Inter (который остается основным шрифтом).
- Сохранение параметра `suppressHydrationWarning` в HTML теге.
- Обеспечение корректной работы шрифтов в различных браузерах.
- **Ограничение для ИИ:** ИИ должен **добавить** конфигурацию для `Source Serif Pro`. Существующая конфигурация `Inter` **должна оставаться неизменной**. `className` в теге `<html>` должен быть обновлен, чтобы включать **обе** CSS-переменные (`inter.variable` и `sourceSerifPro.variable`). Логика файла, не связанная с добавлением `Source Serif Pro`, не должна изменяться.

```typescript
// Текущая реализация в app/layout.tsx (пример, будет адаптирован)
import { Inter } from "next/font/google"

const inter = Inter({ // Существующая конфигурация Inter - НЕ ИЗМЕНЯТЬ
  subsets: ["latin", "cyrillic"],
  display: "swap",
  variable: "--font-inter",
  weight: ["400", "500", "600", "700"]
})

// Обновленная версия с добавлением Source Serif Pro
import { Inter, Source_Serif_Pro } from "next/font/google" // Убедиться в корректном импорте Source_Serif_Pro

const inter = Inter({ // Существующая конфигурация Inter - НЕ ИЗМЕНЯТЬ
  subsets: ["latin", "cyrillic"],
  display: "swap",
  variable: "--font-inter",
  weight: ["400", "500", "600", "700"]
})

const sourceSerifPro = Source_Serif_Pro({ // Новая конфигурация для Source Serif Pro (для заголовков)
  subsets: ["latin", "cyrillic"],
  display: "swap",
  variable: "--font-source-serif-pro", // Новая CSS переменная
  weight: ["400", "500", "600", "700"] // Пример весов, можно скорректировать
})

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html lang="ru" suppressHydrationWarning className={`${inter.variable} ${sourceSerifPro.variable}`}> {/* Включаем ОБЕ переменные шрифтов */}
      <body className="bg-background font-sans">
        <ThemeProvider attribute="class" defaultTheme="light">
          {children}
        </ThemeProvider>
      </body>
    </html>
  )
}
```

#### 3.1.2. Обновление дизайн-токенов

- Обновление файла `design-system/tokens/base/typography.json` с новыми значениями размеров шрифтов, сохраняя существующую структуру и типы токенов.
- Добавление новых токенов для интерлиньяжа (cyr-text, cyr-large), если требуется.
- Добавление токенов для шрифта **Source Serif Pro** в секции `fontFamily`.
- Проверка совместимости с существующей системой токенов.
- **Важно:** После обновления токенов запустить `npm run build:tokens` для генерации CSS-переменных, TS-типов и обновления файлов `styles/tokens.light.css` и `styles/tokens.dark.css`.
- **Ограничение для ИИ:** ИИ должен изменять *только* значения, относящиеся к шрифтам (семейство `fontFamily`, размер `fontSize`, вес `fontWeight`, высота строки `lineHeight`) в `typography.json`. В частности, добавить определение `fontFamily` для `source-serif-pro` и обновить `serif`, если `Source Serif Pro` используется как основной серифный шрифт. Токены для `inter` и `sans` должны остаться. Структура файла и другие типы токенов (цвета, отступы и т.д.) должны оставаться неизменными.

```json
// Обновление в design-system/tokens/base/typography.json (пример)
{
  "fontSize": {
    "app-h1-mobile": { "value": "2.25rem", "type": "fontSize" },
    "app-h1": { "value": "3rem", "type": "fontSize" },
    "app-h2-mobile": { "value": "1.875rem", "type": "fontSize" },
    "app-h2": { "value": "2.25rem", "type": "fontSize" },
    "app-h3-mobile": { "value": "1.25rem", "type": "fontSize" },
    "app-h3": { "value": "1.5rem", "type": "fontSize" },
    "app-body": { "value": "1rem", "type": "fontSize" },
    "app-small": { "value": "0.875rem", "type": "fontSize" },
    "app-caption": { "value": "0.75rem", "type": "fontSize" }
  },
  "lineHeight": {
    "cyr-text": { "value": "1.6", "type": "lineHeight" },
    "cyr-large": { "value": "1.7", "type": "lineHeight" }
  },
  "fontFamily": {
    "sans": {
      "value": "Arial, Helvetica, sans-serif", 
      "type": "fontFamily" 
    },
    "inter": {
      "value": "Inter, Arial, Helvetica, sans-serif",
      "type": "fontFamily"
    },
    "source-serif-pro": {
      "value": "Source Serif Pro, Georgia, Times New Roman, serif", 
      "type": "fontFamily" 
    },
    "serif": {
      "value": "Source Serif Pro, Georgia, Times New Roman, serif", 
      "type": "fontFamily" 
    },
    "mono": {
      "value": "Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace", 
      "type": "fontFamily" 
    }
  }
}
```

#### 3.1.3. Модификация Tailwind конфигурации

- Обновление `tailwind.config.ts` с новыми размерами шрифтов (если они изменились).
- Добавление классов для шрифтовой пары (`font-inter` для основного текста/UI, `font-source-serif-pro` для заголовков).
- Сохранение существующей структуры конфигурации и темы.
- Проверка совместимости с текущей настройкой darkMode.
- **Важно:** При изменении токенов система автоматически интегрирует их с Tailwind через специальный форматтер в `design-system/formatters/css-variables-tailwind.js`.
- **Ограничение для ИИ:** ИИ должен изменять *только* секции `fontFamily`, `fontSize`, `lineHeight` в `tailwind.config.ts`. Добавить определение для `font-source-serif-pro` и обновить `serif`. Определения для `font-inter` и `sans` должны оставаться. Остальная конфигурация, включая цвета, отступы, плагины и структуру темы, не должна затрагиваться.

```typescript
// Обновленная версия в tailwind.config.ts (пример)
module.exports = {
  darkMode: ["class"],
  content: [
    "./pages/**/*.{ts,tsx}",
    "./components/**/*.{ts,tsx}",
    "./app/**/*.{ts,tsx}",
    "./src/**/*.{ts,tsx}",
    "*.{js,ts,jsx,tsx,mdx}",
  ],
  theme: {
    extend: {
      fontFamily: {
        sans: ["var(--font-inter)", "Arial", "Helvetica", "sans-serif"],
        inter: ["var(--font-inter)", "Arial", "Helvetica", "sans-serif"],
        'source-serif-pro': ["var(--font-source-serif-pro)", "Georgia", "serif"],
        serif: ["var(--font-source-serif-pro)", "Georgia", "serif"],
      },
      fontSize: {
        'app-h1-mobile': '2.25rem',   // 36px
        'app-h1': '3rem',           // 48px
        'app-h2-mobile': '1.875rem',  // 30px
        'app-h2': '2.25rem',          // 36px
        'app-h3-mobile': '1.25rem',   // 20px
        'app-h3': '1.5rem',           // 24px
        'app-body': '1rem',           // 16px
        'app-small': '0.875rem',      // 14px
        'app-caption': '0.75rem',     // 12px
      },
      lineHeight: {
        'cyr-text': '1.6',
        'cyr-large': '1.7',
      },
    }
  },
  plugins: [require("tailwindcss-animate")],
}
```

### 3.2. Разработка компонентов

**Ограничение для ИИ:** При разработке и модификации компонентов ИИ должен фокусироваться *исключительно* на применении шрифтовых стилей (`font-source-serif-pro` для заголовков/акцентов, `font-inter` для основного текста/UI, размеры, веса, `line-height`) через классы Tailwind CSS или CSS-переменные. **Не изменять логику, структуру JSX (кроме классов/стилей для шрифтов), цвета, отступы или другие аспекты дизайна компонентов, не связанные напрямую с применением шрифтов.**

#### 3.2.1. Базовые типографические компоненты

- Создание компонентов с сохранением существующих паттернов использования `cn` из `@/lib/utils`.
- Разработка с учетом текущей темы и системы стилей проекта.
- Использование существующих токенов для цветов (primary, foreground, muted-foreground) – **эти цвета ИИ не должен менять**.
- **Ограничение для ИИ:** Задача ИИ – определить классы Tailwind CSS для каждого варианта типографики: `font-source-serif-pro` для заголовков `h1`-`h3` (используя семантические адаптивные классы, например, `text-app-h1-mobile md:text-app-h1`), `font-inter` для `p` (body), `small`, `caption`, `lead` и т.д., а также соответствующие классы для `fontWeight` и `lineHeight`, уже заложенные в эти семантические классы. Не изменять переданные `props`, базовую структуру `Component` или логику компонента.

```typescript
// components/ui/typography.tsx (пример с Source Serif Pro для заголовков)
import { cn } from "@/lib/utils"
import React from "react"

interface TypographyProps extends React.HTMLAttributes<HTMLDivElement> {
  variant: "h1" | "h2" | "h3" | "p" | "small" | "caption" | "lead" | "blockquote" | "list" | "inlineCode" | "hint";
  as?: React.ElementType;
}

export function Typography({ 
  variant, 
  as: Component = "div", 
  children, 
  className, 
  ...props 
}: TypographyProps) {
  const variants = {
    h1: "font-source-serif-pro text-app-h1-mobile md:text-app-h1 leading-tight font-semibold text-foreground",
    h2: "font-source-serif-pro text-app-h2-mobile md:text-app-h2 leading-tight font-semibold text-foreground",
    h3: "font-source-serif-pro text-app-h3-mobile md:text-app-h3 leading-snug font-medium text-foreground",
    p: "font-inter text-app-body leading-cyr-text font-normal text-foreground",
    small: "font-inter text-app-small leading-5 font-normal text-muted-foreground",
    caption: "font-inter text-app-caption leading-4 font-normal text-muted-foreground",
    lead: "font-inter text-app-h3-mobile md:text-app-h3 leading-relaxed font-normal text-foreground",
    blockquote: "font-inter text-app-body italic border-l-4 pl-4 border-muted leading-cyr-text text-foreground",
    list: "font-inter text-app-body list-disc pl-5 space-y-2 leading-cyr-text text-foreground",
    inlineCode: "font-mono text-app-small bg-muted px-1.5 py-0.5 rounded leading-5 text-foreground",
    hint: "font-inter text-app-caption leading-4 font-normal text-muted-foreground",
  };

  return (
    <Component 
      className={cn(variants[variant], className)}
      {...props}
    >
      {children}
    </Component>
  );
}
```

#### 3.2.2. Обновление Badge и CounterBadge

- Модификация существующего `badgeVariants` для новых размеров шрифта (`text-sm` -> `text-base` и т.д.), если это требуется по новым токенам.
- Сохранение текущей функциональности компонента с учетом пропсов и типов.
- Обновление в соответствии со структурой проекта.
- **Ограничение для ИИ:** Задача ИИ – обновить `badgeVariants` (для `Badge`) и внутренние стили (`CounterBadge`), изменив *только* классы или стили, отвечающие за **шрифтовые характеристики** (семейство, размер, вес). **Шрифт должен остаться `Inter`** (текст обычный, числа - полужирные в `CounterBadge`). Остальные стили (цвета, границы, отступы) и логика компонента должны остаться нетронутыми.

```typescript
// components/ui/badge.tsx
// Обновляем только размер шрифта, если необходимо, сохраняя шрифт Inter и остальную структуру
const badgeVariants = cva(
  "inline-flex items-center rounded-full border px-2.5 py-0.5 text-sm transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 badge font-inter font-normal",
  {
    variants: {
      variant: {
        default:
          "border-transparent bg-primary text-primary-foreground hover:bg-primary/80",
        secondary:
          "border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",
        destructive:
          "border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",
        outline: "text-foreground",
      }
    },
    defaultVariants: {
      variant: "default",
    },
  }
)
```

#### 3.2.3. Создание или обновление специализированных компонентов (например, GrammarRuleBlock)

- Применение новых шрифтов к текстовым элементам: `Source Serif Pro` для заголовков, `Inter` для основного текста.
- **Ограничение для ИИ:** Задача ИИ – применить соответствующие классы шрифтов (`font-source-serif-pro`, `font-inter`) к текстовым элементам внутри компонента. **Не изменять структуру JSX, цвета (например, `bg-blue-50`, `text-primary`), отступы (`p-4`, `mb-3`), иконки или логику отображения.**

```typescript
// components/ui/GrammarRuleBlock.tsx (пример, если такой компонент есть и требует обновления)
import { cn } from "@/lib/utils"
import React from "react"

// ... (интерфейс остается без изменений)

export function GrammarRuleBlock({ 
  title, 
  rule, 
  examples, 
  exceptions, 
  className, 
  ...props 
}: /* GrammarRuleBlockProps */ any) {
  return (
    <div 
      className={cn(
        "bg-blue-50 p-4 md:p-6 rounded-lg my-6",
        className
      )}
      {...props}
    >
      <h3 className="font-source-serif-pro font-semibold text-lg md:text-xl text-primary mb-3">
        {title}
      </h3>
      
      <div className="font-inter text-base leading-cyr-text mb-4 text-foreground">
        {rule}
      </div>
      
      {examples && (
        <div className="mb-4">
          <h4 className="font-inter font-medium text-base mb-2 text-foreground">Примеры:</h4>
          <div className="pl-4 border-l-2 border-primary/20 italic text-foreground/90">
            {examples}
          </div>
        </div>
      )}
      
      {exceptions && (
        <div className="bg-yellow-50 p-3 rounded-md mb-2">
          <h4 className="font-inter font-medium text-sm mb-1 text-foreground">Исключения:</h4>
          <div className="text-sm text-foreground/90">{exceptions}</div>
        </div>
      )}
    </div>
  );
}
```

### 3.3. Обновление существующих компонентов

- Анализ и обновление **всех существующих компонентов пользовательского интерфейса** (например, `SelectionDropdown`, кнопок, форм, карточек, модальных окон, элементов навигации и т.д.) для применения `Source Serif Pro` к элементам, идентифицированным как заголовки или акцентный текст, и сохранения/применения `Inter` для основного текста, меток, опций и другого UI-текста.
- Сохранение текущего стиля (цвета, отступы, иконки, поведение) и функциональности для всех компонентов.
- Проверка и обновление других компонентов форм, кнопок и элементов интерфейса **только в части применения соответствующих шрифтовых стилей к тексту** (`Source Serif Pro` для заголовков/акцентов, `Inter` для остального).
- Обеспечение обратной совместимости с существующими компонентами.
- **Ограничение для ИИ:** При обновлении **любых** существующих компонентов ИИ должен изменять *только* классы Tailwind CSS или стили, отвечающие за **шрифтовые характеристики текста** (`font-inter`, `font-source-serif-pro`, `fontSize`, `fontWeight`, `lineHeight`). **Не изменять компоновку, цвета, состояние, логику отображения, иконки или другие нешрифтовые стили.** Компонент `SelectionDropdown` служит примером такого подхода.

### 3.4. Тестирование сборки

- Тестирование с существующими webpack настройками
- Проверка совместимости с модификациями webpack в next.config.mjs
- Проверка сборки для GitHub Pages с учетом basePath и assetPrefix
- Тестирование с отключенными проверками TypeScript (ignoreBuildErrors: true)

### 3.5. Документация

- Создание руководства по типографике Rus100
- Разработка документации для команды разработчиков
- Создание примеров использования компонентов
- Интеграция с существующей документацией

### 3.3. Тестирование и Валидация

#### 3.3.3. Пользовательское тестирование (UAT)

- Конечный пользователь (Заказчик или его представитель) проводит визуальную проверку и подтверждает соответствие внедренной типографики ожиданиям на всех ключевых страницах и компонентах.

## 4. Этапы и сроки внедрения

### Этап 1: Подготовка и анализ существующего кода (1-2 дня)
- Анализ существующей типографики и компонентов
- Изучение текущей конфигурации webpack и next.config.mjs
- Проверка совместимости с GitHub Pages
- Детальное планирование изменений **с учетом строгих ограничений на работу ИИ (только шрифты)**.

### Этап 2: Базовая интеграция (2-3 дня)
- Интеграция шрифта **Source Serif Pro** (для заголовков) в `app/layout.tsx`, сохраняя **Inter**.
- Обновление дизайн-токенов в `typography.json` **(только шрифтовые значения)**.
- Модификация Tailwind конфигурации **(только шрифтовые секции)**.
- Тестирование сборки с обновлениями.

### Этап 3: Разработка компонентов (4-6 дней)
- Создание/обновление типографических компонентов (`Typography.tsx`) **(изменения только в части шрифтов)**.
- Обновление `Badge` и `CounterBadge` **(изменения только в части шрифтов, с учетом их специфики отображения текста и чисел)**.
- Тестирование компонентов в Storybook (визуальная проверка применения шрифтов).

### Этап 4: Внедрение и тестирование (3-5 дней)
- Обновление **всех релевантных интерфейсных компонентов** (включая, но не ограничиваясь, `SelectionDropdown`, кнопки, формы, элементы навигации, карточки и т.д.) **(изменения только в части шрифтов)**.
- Тестирование на разных устройствах и браузерах (фокус на отображении текста).
- Проверка сборки под разными окружениями (dev/prod).
- Проверка работы с GitHub Pages.

### Этап 5: Документация и финализация (2-3 дней)
- Доработка документации
- Финальное тестирование
- Создание руководства для разработчиков
- Обучение команды новой типографической системы

**Общая продолжительность проекта:** 12-19 рабочих дней

## 5. Критерии приемки

### 5.1. Технические критерии

- Успешная сборка проекта с webpack настройками без ошибок
- Корректная загрузка шрифтов (Inter, **Source Serif Pro**) на всех поддерживаемых устройствах и браузерах
- Соответствие реализации дизайн-токенам и новой 3-уровневой семантической и адаптивной типографической системе (H1-H3, Body, Small, Caption) **в части шрифтов**.
- **Отсутствие несанкционированных ИИ изменений в дизайне, компоновке, цветах или логике компонентов, не связанных с типографикой.**
- Отсутствие регрессий и ошибок в существующих функциях
- Производительность шрифтов в рамках допустимых значений (CLS < 0.1)
- Совместимость с `basePath` и `assetPrefix` для GitHub Pages

### 5.2. Функциональные критерии

- Правильное отображение кириллических символов во всех компонентах
- Корректная работа `SelectionDropdown` и других интерактивных компонентов
- Правильное отображение текста и числовых значений в `CounterBadge`
- Корректное отображение компонентов с правилами русского языка
- Правильная работа при переключении темы (если поддерживается в проекте)

### 5.3. Визуальные критерии (для куратора без доступа к коду)

- Во всех бейджах/пилюлях текст отображается нормальным шрифтом (Inter), а числа - полужирным (Inter).
- Размер текста и отступы пропорциональны и соответствуют дизайну (изменения отступов ИИ не производит).
- Заголовки (H1, H2, H3) выделяются шрифтом **Source Serif Pro**.
- Читаемость текста в разных контекстах (тесты, правила, интерфейс) с новыми шрифтами.
- Адаптивность на мобильных устройствах (верстка не должна быть нарушена изменениями шрифтов).

## 6. Технические требования и ограничения

### 6.1. Совместимость

- Браузеры: Chrome, Firefox, Safari, Edge (последние 2 версии)
- Устройства: десктоп, планшеты, мобильные (iOS, Android)
- Сохранение поддержки GitHub Pages с правильными путями к ресурсам
- Совместимость с Next.js и текущей конфигурацией

### 6.2. Производительность

- Оптимальное время загрузки шрифтов
- Минимизация Cumulative Layout Shift (CLS)
- Сохранение поддержки font-display: swap для быстрого отображения
- Совместимость с настройками webpack в next.config.mjs:
  ```javascript
  webpack: (config, { dev, isServer }) => {
    // Изменяем функцию хеширования для решения проблемы с WasmHash
    config.output.hashFunction = 'xxhash64';
    
    return config;
  }
  ```

### 6.3. Ограничения проекта

- Использование существующей структуры проекта и компонентов
- **Строгое ограничение на модификации ИИ: только шрифты и связанные с ними конфигурации. Дизайн, макет, цвета, логика компонентов не изменяются ИИ.**
- Учет опции `ignoreBuildErrors` для TypeScript при сборке
- Сохранение функциональности для GitHub Pages с правильными путями
- Поддержка текущей функциональности без регрессий
- Соблюдение требований для кириллического контента

## 7. Чек-лист внедрения (для куратора и разработчика)

### 7.1. Подготовительные шаги

- [ ] Создать резервную копию ключевых файлов (app/layout.tsx, tailwind.config.ts)
- [ ] Проверить текущую совместимость с GitHub Pages
- [ ] Оценить текущую производительность загрузки шрифтов
- [ ] Проверить компоненты `SelectionDropdown` и `Badge` в разных браузерах

### 7.2. Настройка шрифтов и конфигурации

- [ ] Добавить **Source Serif Pro** в `app/layout.tsx` (наряду с `Inter`).
- [ ] Обновить CSS-классы в HTML теге для поддержки обоих шрифтов
- [ ] Обновить `typography.json` с новыми размерами шрифтов
- [ ] Обновить `tailwind.config.ts` с новыми размерами и настройками
- [ ] Проверить сборку проекта после обновлений

### 7.3. Разработка и обновление компонентов

- [ ] Создать компонент `Typography`
- [ ] Обновить `badgeVariants` с новыми размерами шрифтов
- [ ] Проверить и обновить `SelectionDropdown`
- [ ] Протестировать компоненты в разных состояниях и размерах экрана

### 7.4. Тестирование (наиболее важные шаги для куратора)

- [ ] Провести визуальную проверку бейджей/пилюль (текст обычный, числа полужирные)
- [ ] Проверить размеры и читаемость текста в `SelectionDropdown`
- [ ] Оценить компоненты с правилами русского языка
- [ ] Проверить адаптивность компонентов на мобильных устройствах
- [ ] Оценить загрузку шрифтов и отсутствие "прыжков" контента
- [ ] Проверить производительность на медленных соединениях
- [ ] Протестировать в разных браузерах (особенно Safari)

### 7.5. Документация и финализация

- [ ] Завершить руководство по типографике
- [ ] Обновить примеры использования компонентов
- [ ] Подготовить материалы для команды
- [ ] Провести финальное тестирование

## 8. Последовательность проверки для куратора

1. **Первичная визуальная проверка:**
   - Открыть основные страницы сайта и проверить читаемость текста
   - Обратить внимание на заголовки (должны быть шрифтом **Source Serif Pro**)
   - Проверить контрастность и размер текста

2. **Проверка компонентов `SelectionDropdown`:**
   - Проверить отображение выпадающего списка
   - Убедиться, что текст в пилюлях нормального веса, а числа - полужирные
   - Проверить адаптивность на мобильных устройствах

3. **Проверка блоков с правилами:**
   - Оценить читаемость текстовых блоков с правилами
   - Проверить контраст и иерархию (заголовок -> текст -> примеры -> исключения)
   - Оценить адаптивность блоков на разных размерах экрана

4. **Проверка производительности:**
   - Открыть сайт в режиме инкогнито для проверки первой загрузки
   - Оценить скорость появления текста (должен быть виден до полной загрузки шрифтов)
   - Проверить отсутствие "прыжков" контента при загрузке шрифтов

5. **Финальная проверка:**
   - Протестировать всю функциональность, связанную с текстом
   - Проверить работу в разных браузерах
   - Убедиться в правильной работе на GitHub Pages (если применимо)

## 9. Итоговые результаты

По завершении проекта будет реализована полная типографическая система Rus100, включающая:

1. Полный набор типографических компонентов для платформы
2. Обновленную конфигурацию Tailwind CSS с новыми размерами
3. Интегрированную шрифтовую пару **Inter** (основной текст/UI) + **Source Serif Pro** (заголовки H1-H3).
4. Оптимизированную типографику для кириллического контента
5. Обновленные компоненты с правильным отображением текста и чисел
6. Руководство по использованию новой типографической системы
7. Внедренную адаптивную шкалу размеров для заголовков (H1-H3), обеспечивающую корректное отображение на мобильных и десктопных устройствах.

Типографическая система обеспечит четкую визуальную иерархию, улучшенную читаемость образовательного контента и оптимальный пользовательский опыт для учащихся и учителей при работе с материалами по русскому языку.

## 10. Приложения и инструкции

- Приложение A: Таблица сравнения старых и новых размеров шрифтов
- Приложение B: Визуальные примеры типографических компонентов
- Приложение C: Инструкция по тестированию типографики для куратора
- Приложение D: Руководство по внедрению для разработчика

## 11. План восстановления при проблемах

1. При проблемах с webpack и сборкой:
   - Вернуть конфигурацию webpack в исходное состояние
   - Проверить совместимость новых шрифтов с существующими настройками

2. При проблемах с отображением:
   - Проверить загрузку шрифтов в инструментах разработчика
   - Убедиться в правильности путей к шрифтам, особенно при деплое на GitHub Pages

3. При проблемах с производительностью:
   - Оптимизировать загрузку шрифтов через preconnect и font-display
   - Уменьшить количество загружаемых начертаний шрифтов 

## 12. Текущие ограничения и известные проблемы

- **Проблема сборки Webpack/Next.js:** Существует известная проблема `TypeError: Cannot read properties of undefined (reading 'length')` в `WasmHash._updateWithBuffer` при сборке проекта (`npm run build`).
    - **Текущее решение (Webpack):** В `next.config.mjs` добавлена конфигурация `config.output.hashFunction = 'xxhash64'`, которая временно решает эту проблему для некоторых сценариев.
    - **Текущее решение (TypeScript):** В `next.config.mjs` установлен параметр `typescript.ignoreBuildErrors = true`. Это позволяет сборке успешно завершаться, несмотря на наличие ошибок TypeScript, не связанных напрямую с типографикой. **Важно: это временное решение, и ошибки TypeScript должны быть устранены в будущем.**
- **GitHub Pages:** Конфигурация для развертывания на GitHub Pages (`next.config.mjs` -> `output: 'export'`) может конфликтовать с некоторыми настройками Next.js, необходимыми для разработки. Это требует внимания при переключении между режимами сборки.
- **Зависимость от Node.js:** Проблема со сборкой Webpack может быть связана с версией Node.js. Рекомендуется использовать LTS версию Node.js.

## 13. План коммуникации

- Ежедневные обновления статуса проекта
- Еженедельные встречи для обсуждения задач и результатов
- Ежемесячные отчеты о ходе выполнения проекта

## 14. Ответственность сторон

### 14.1. Ответственность Исполнителя (AI Ассистента)

- Предоставление корректных фрагментов кода для реализации задач.
- Объяснение предлагаемых изменений и их влияния на систему.
- Указание на потенциальные проблемы и зависимости.
- Выполнение задач в соответствии с данным контрактом.
- Информирование о необходимости запуска команд сборки (например, `npm run build:tokens`).

### 14.2. Ответственность Заказчика (Пользователя)

- Предоставление четких требований и обратной связи.
- Проверка и утверждение предложенных изменений.
- Выполнение команд сборки, запуска сервера и тестирования по инструкциям Исполнителя.
- Финальная валидация результатов.
- Принятие решений по вопросам, выходящим за рамки компетенций AI (например, окончательный выбор шрифтов, разрешение конфликтов версий, не связанных с типографикой). 