# Инструкции по сборке и деплою

## Локальная разработка

### Запуск в режиме разработки
```bash
npm run dev
```
- Запускает приложение в режиме разработки
- Доступно по адресу http://localhost:3000
- Поддерживает hot-reload (автоматическое обновление при изменениях)

### Локальная сборка и просмотр
1. Сборка для локального просмотра:
```bash
npm run build:local
```

2. Запуск локального сервера для просмотра собранного приложения:
```bash
npm run start:static:local
```
- Доступно по адресу http://localhost:3000
- Показывает приложение точно так, как оно будет работать в продакшене
- Не поддерживает hot-reload

## Деплой на GitHub Pages

### Автоматический деплой через GitHub Actions
1. Закоммитить изменения:
```bash
git add .
git commit -m "Описание изменений"
git push
```
2. GitHub Actions автоматически:
   - Запустит сборку с правильными настройками для GitHub Pages
   - Выполнит деплой на GitHub Pages
   - Процесс можно отслеживать во вкладке "Actions" на GitHub

### Ручная сборка для GitHub Pages
Если нужно проверить сборку локально перед отправкой на GitHub:

1. Для Windows:
```bash
npm run build:gh-pages:win
```

2. Для Unix-систем (Linux/MacOS):
```bash
npm run build:gh-pages
```

## Важные особенности

### Конфигурация путей
- Локальная разработка использует относительные пути
- GitHub Pages требует префикс `/rus-100/` для всех путей
- Конфигурация автоматически определяется через переменную окружения `GITHUB_PAGES`

### Структура сборки
- Исходные файлы находятся в директориях `app/` и `components/`
- Собранные файлы помещаются в директорию `out/`
- Статические ассеты (изображения, шрифты) должны находиться в `public/`

### Проверка результатов
1. Локальная версия:
   - Должна работать по адресу http://localhost:3000
   - Все ассеты должны загружаться корректно
   - Навигация должна работать без ошибок

2. GitHub Pages версия:
   - Проверить работу по адресу https://[username].github.io/rus-100/
   - Все пути должны начинаться с `/rus-100/`
   - Проверить работу навигации и загрузку ассетов

### Решение проблем
1. Если локальная сборка не работает:
   - Проверить `next.config.mjs`
   - Очистить `.next` и `out` директории
   - Переустановить зависимости: `npm ci`

2. Если деплой на GitHub Pages не работает:
   - Проверить настройки репозитория (Settings -> Pages)
   - Проверить файл `.github/workflows/deploy.yml`
   - Просмотреть логи в GitHub Actions 